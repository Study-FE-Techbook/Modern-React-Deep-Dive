# 9. ëª¨ë˜ ë¦¬ì•¡íŠ¸ ê°œë°œ ë„êµ¬ë¡œ ê°œë°œ ë° ë°°í¬ í™˜ê²½ êµ¬ì¶•í•˜ê¸°

**ë¬´ì—ì„œ ìœ ë¥¼ ì°½ì¡°í•˜ëŠ” ê²ƒì€ ê²ë‚˜ ì–´ë µë‹¤.**

<br>

## 9.1 Next.jsë¡œ ë¦¬ì•¡íŠ¸ ê°œë°œ í™˜ê²½ êµ¬ì¶•í•˜ê¸°

### âœ¨ CLIëŠ” ë¹ ë¥´ê³  ì‰½ê²Œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆì§€ë§Œ í”„ë¡œì íŠ¸ ìì²´ë¥¼ ì´í•´í•˜ëŠ”ë°ì— ë„ì›€ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

- ë§ì€ ê°œë°œìê°€ ì‚¬ìš©í•´ì˜¨ `create-react-app` ê³¼ ê°™ì€ ë”ì´ìƒ ìœ ì§€ë³´ìˆ˜ ë˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ ë¦¬ì•¡íŠ¸ ê¸°ë°˜ í”„ë ˆì„ì›Œí¬ì˜ ì‚¬ìš©ì„ ì œì•ˆí•˜ëŠ” ëŸ°ì²˜ í˜•íƒœë¡œ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ í¬ë‹¤.

<br>

### create-react-app ì—†ì´ ì§ì ‘ êµ¬ì¶•í•˜ê¸°

---

<br>

```bash
npm init

npm i react react-dom next

npm i @types/node @types/react @types/react-dom eslint eslint-config-next typescript --save-dev
```

- ë²ˆì™¸ì ìœ¼ë¡œ `--save-dev` ëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ `devDependencies` ì— ì¶”ê°€í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. (ê°œë°œ ëª¨ë“œì—ì„œë§Œ ì‚¬ìš©)

<br>

### tsconfig.json ì‘ì„±

```bash
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "compilerOptions": {
    "target": "ES5",
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "ESNext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": "src",
    "paths": {
      "#pages/*": ["/pages/*"],
      "#hooks/*": ["/pages/*"],
      "#types/*": ["/types/*"],
      "#components": ["/components/*"],
      "#utils/*": ["/utils/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}

```

- [ì°¸ê³ ](https://www.typescriptlang.org/tsconfig/)

<br>

### next.config.js ì‘ì„±í•˜ê¸°

---

<br>

```js
/** type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  poweredByHeader: false,
  eslint: {
    ignoreDuringBuilds: true,
  },
};

module.export = nextConfig;
```

- ê¹ƒí—ˆë¸Œ Next.js ë ˆí¬ì§€í† ë¦¬ì—ì„œ ë” ë§ì€ ì˜µì…˜ í™•ì¸ ê°€ëŠ¥

<br>

### 9.1.4 ESLint, Prettier ì„¤ì •í•˜ê¸°

<br>

```js
const path = require("path");

const createConfig = require("@titicaca/eslint-config-triple/create-config");

const { extends: extendConfigs, overrides } = createConfig({
  type: "frontend",
  project: path.resolve(__dirnamem, "./tsconfig.json"),
});

module.exports = {
  extends: [...extendConfigs, "next/core-web-vitals"],
  overrides,
};
```

- ì§€ë‚œ ë‹¨ì›ì—ì„œ í™•ì¸í–ˆë˜ ë‚¨ì´ ë§Œë“¤ì–´ì£¼ëŠ” ìš”ë¦¬ ì¤‘ í•˜ë‚˜ì¸ `eslint-config-tripple` ì„ í™œìš©í•œë‹¤.

- `eslint-config-next` ì™€ ì¶©ëŒí•  ìˆ˜ ìˆì–´ ë”°ë¡œ ì„¤ì •í•´ì£¼ì–´ì•¼í•œë‹¤.

<br>

### ğŸ”– ì •ë¦¬

- ì§ì ‘ì ìœ¼ë¡œ ìœ„ì™€ ê°™ì´ ì—¬ëŸ¬ íŒŒì¼ì„ ì„¸íŒ…í•´ë³´ëŠ” ê²½í—˜ì„ ìŒ“ëŠ”ë‹¤ë©´ `Next.js`ë‚˜ `typescript` ì— ëŒ€í•œ ë§ì€ ë‚´ìš©ì„ ë°°ìš¸ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

- ê¹ƒí—ˆë¸Œë¥¼ í™œìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ ë•Œ, `Templete repository` ì˜µì…˜ì„ ì„¤ì •í•´ë‘ë©´ ì¶”í›„ì— ë‹¤ë¥¸ í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ì˜µì…˜ì„ ì²´í¬í–ˆë˜ í”„ë¡œì íŠ¸ì˜ ë‚´ìš©ì‘ ëª¨ë‘ ë³µì‚¬í•˜ì—¬ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤.

- `create-next-app` ê³¼ ê°™ì€ ë‚˜ë§Œì˜ `create-***-app` ì„ ë§Œë“¤ì–´ ë³´ëŠ” ê²ƒë„ ë„ì›€ì´ ëœë‹¤.

<br>

## 9.2 ê¹ƒí—ˆë¸Œ 100% í™œìš©í•˜ê¸°

### âœ¨ ê¹ƒí—ˆë¸Œì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ë”ìš± í’ë¶€í•˜ê²Œ í•´ë³´ì

<br>

### ê¹ƒí—ˆë¸Œ ì•¡ì…˜ìœ¼ë¡œ CI í™˜ê²½ êµ¬ì¶•í•˜ê¸°

---

### ğŸ”– CIë€ ë¬´ì—‡ì¸ê°€?

- CI(Continuous Integration)ì€ ì—¬ëŸ¬ ê¸°ì—¬ìê°€ ê¸°ì—¬í•œ ì½”ë“œë¥¼ ì§€ì†ì ìœ¼ë¡œ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸í•´ ì½”ë“œì˜ ì •í•©ì„±ì„ í™•ì¸í•˜ëŠ” ê²ƒ.

- ê³¼ê±°ì—” ì´ëŸ¬í•œ CI í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•´ **Jenkins**ê°€ ì‚¬ìš©ë˜ì—ˆì§€ë§Œ, ìµœê·¼ì— **ê¹ƒí—ˆë¸Œ ì•¡ì…˜**ì´ ë– ì˜¤ë¥´ëŠ” ì¶”ì„¸ì´ë‹¤.

### ğŸ·ï¸ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì˜ ê¸°ë³¸ ê°œë…

- ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ **ëŸ¬ë„ˆ**, **ì•¡ì…˜**, **ì´ë²¤íŠ¸**, **ì¡**, **ìŠ¤í…**ì˜ ê°œë…ì„ ê°€ì§€ê³  ìˆìœ¼ë©° ê°ê°ì˜ ê°œë…ë“¤ì´ ë§ë¬¼ë ¤ ì´ë¥¼ êµ¬ì„±í•œë‹¤.

![ê¹ƒí—ˆë¸Œ ì•¡ì…˜](image.png)

```yaml
name: CI # ì•¡ì…˜ì˜ ì´ë¦„

on: # í•„ìˆ˜ ê°’, ì•¡ì…˜ ì‹¤í–‰ ì‹œì  ì •ì˜
  push:
    branches-ignore: # í•´ë‹¹ ì˜ˆì œì˜ ê²½ìš° prì„ ì˜¬ë¦°ë‹¤ëŠ” ê²ƒ ìì²´ê°€ mainìœ¼ë¡œ pushë¨ì„ ì˜ë¯¸í•˜ë¯€ë¡œ ì´ë ‡ê²Œ ì„¤ì •
      - main

jobs: # í•„ìˆ˜ ê°’, ìˆ˜í–‰í•  ì¡ ì„¤ì •
  build: # ì„ì˜ ì§€ì • ë„¤ì´ë°, nameê³¼ ê°™ì€ ì—­í• 
    runs-on: ubuntu-latest # ì–´ëŠ í™˜ê²½ì—ì„œ í•´ë‹¹ ì‘ì—…ì´ ì‹¤í–‰ë ì§€ ê²°ì •

    steps: # ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ì‘ì—… ì •ì˜
      - uses: actions/checkout@v3 # í•´ë‹¹ ìŠ¤í…ì—ì„œ ì‚¬ìš©í•  ì‘ì—…
      - uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: "install dependencies"
        working-directory: ./CI/src
        run: npm ci

      - name: "build"
        working-directory: ./CI/src
        run: npm run build
```

### ğŸ‘ github/actionì„ í™œìš©í•´ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì„¤ì •í•œ íŠ¸ë¦¬ê±°ë§ˆë‹¤ ì•Œë§ê²Œ ì‚¬ìš©í•´ë³´ì!

### ğŸ·ï¸ ë˜í•œ ê¹ƒí—ˆë¸Œ Dependabotìœ¼ë¡œ ë³´ì•ˆ ì·¨ì•½ì  ë˜í•œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.

<br>

### ğŸ”– ì •ë¦¬

- ê¹ƒí—ˆë¸ŒëŠ” ì•¡ì…˜ì„ ë¹„ë¡¯í•˜ì—¬ **Dependabot**, **Copilot**, **Github Pages** ë“±ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ, ê°œë°œìë¡œì„œ ì´ë¥¼ ì˜ ì¨ë¨¹ì–´ì•¼í•œë‹¤.

<br>

## 9.3 ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°

### âœ¨ ë¦¬ì•¡íŠ¸ ì•±ì„ ì†ì‰½ê²Œ ë°°í¬ ê°€ëŠ¥í•œ SaaS ì„œë¹„ìŠ¤ë¥¼ ì•Œì•„ë³´ì

### ë‹¤ì–‘í•œ ë°°í¬ ì‚¬ì´íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ë°°í¬ë¥¼ ì§„í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤.

- ìµœê·¼ Next.jsë¥¼ ë§ì´ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì— ì¹œìˆ™í•œ vercel ë°°í¬ë¥¼ ì§„í–‰í•´ë³´ì•˜ë‹¤.

![ë²„ì…€ ë°°í¬](image-1.png)

### âœ¨ ë²ˆì™¸ì ìœ¼ë¡œ .yaml íŒŒì¼ì„ í†µí•´ ì§ì ‘ CI/CDë¥¼ êµ¬ì„±í•˜ì—¬ preview í™•ì¸ë„ ê°€ëŠ¥

![alt text](image-2.png)

- í° ì°¨ì´ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤.. (ì¤‘ê¸‰ í”„ë¡œì íŠ¸ ë•Œ ì´ë ‡ê²Œ í–ˆì—ˆìŒ)

<br>

## 9.4 ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë„ì»¤ë¼ì´ì¦ˆ í•˜ê¸°

### âœ¨ ì§€ê¸ˆê¹Œì§€ì˜ ê³¼ì •ì€ ì•±ì„ ì‰½ê³  ë¹ ë¥´ê²Œ ë°°í¬í•  ìˆ˜ ìˆëŠ” ê³¼ì •ì´ë©°, ì´ëŠ” í•­ìƒ ì¥ì ë§Œ ê°€ì§„ ê²ƒì€ ì•„ë‹ˆë‹¤.

- ì•±ì„ ììœ ë¡­ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ëŠ” ê²ƒì— ë¶„ëª… í•œê³„ê°€ ìˆê³ , ë¹„ìš© ì²´ê³„ë˜í•œ ìœ ì—°í•˜ì§€ ì•Šë‹¤.

### ğŸ‘ ë„ì»¤ë¥¼ í™œìš©í•˜ì—¬ ì•±ì„ í•­ìƒ ë°°í¬ ê°€ëŠ¥í•œ 'ì»¨í…Œì´ë„ˆ' ìƒíƒœë¡œ ë§Œë“¤ì–´ë‘ì–´ ì¢…ì†ë˜ì§€ ì•Šì€ ìœ ì—°í•œ ìƒíƒœë¡œ ê´€ë¦¬ ê°€ëŠ¥í•˜ë‹¤.

> ìš´ì˜ì²´ì œë¥¼ ê°€ìƒí™”í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆ ê¸°ìˆ ì´ë‹ˆë§Œí¼ ê°€ìƒë¨¸ì‹ ì— ë¹„í•´ì„œ ê°€ë²¼ìš°ë©°, VMì„ í¬í•¨í•˜ì—¬ í•œ ëŒ€ì˜ ì„œë²„ì— ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ë¥¼ êµ¬ë™í•˜ê¸° ì¢‹ë‹¤.

> ë³´ì•ˆìƒ, ì„œë¹„ìŠ¤ê°€ í„¸ë¦¬ë”ë¼ë„ ì›ë˜ì˜ ì„œë²„ì— ì˜í–¥ì„ ë¯¸ì¹˜ê¸°ê°€ ì‰½ì§€ ì•Šì€ ê²©ë¦¬ëœ êµ¬ì¡°ì´ë‹ˆë§Œí¼, ê°€ìƒí™”ì˜ ì¥ì ì„ ìƒë‹¹ ë¶€ë¶„ í™œìš©í•  ìˆ˜ ìˆë‹¤.

> ê°€ìƒë¨¸ì‹ (VM)ë“¤ê³¼ ë‹¬ë¦¬, ê¸°ì¡´ ë¦¬ëˆ…ìŠ¤ ìì›(ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ë“±)ì„ ê·¸ëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆì–´ì„œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì„ í•œ ì„œë²„ì— ë•Œë ¤ ë°•ì•„ ëŒë¦¬ê¸°ê°€ ì¢‹ì€ í¸ì´ë‹¤.
> ë¦¬ëˆ…ìŠ¤ ì»¤ë„ 2.6.32-431 ì´ìƒì—ì„œ ì§€ì›í•œë‹¤. CentOS ê¸°ì¤€ìœ¼ë¡œëŠ” CentOS 6.5 ì´ìƒì„ ìš”êµ¬í•œë‹¤.

> ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ì„ ì‰½ê²Œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ì œê³µí•œë‹¤.
> ë ˆì´ì–´ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©° ì´ë¥¼ ìœ ë‹ˆì˜¨ ë§ˆìš´íŠ¸í•´ì„œ ê´€ë¦¬ë˜ê³  ìˆë‹¤.

> ë‹¤ì–‘í•œ ì´ë¯¸ì§€ê°€ ë ˆì´ì–´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥ê³µê°„
> ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.

> ì´ë¯¸ì§€ë¥¼ ì œê³µí•˜ëŠ” ì›ê²© ì €ì¥ì†Œê°€ ìˆì–´ì„œ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

<br>

### 9.4.1 ë¦¬ì•¡íŠ¸ ì•±ì„ ë„ì»¤ë¼ì´ì¦ˆ í•˜ëŠ” ë°©ë²•

---

### ğŸ”– ì•±ì„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë§Œë“œëŠ” ê²ƒì„ ë„ì»¤ë¼ì´ì¦ˆë¼ê³  í•œë‹¤.

- ë„ì»¤ëŠ” ì•±ì„ ë¹ ë¥´ê²Œ ë°°í¬ ê°€ëŠ¥í•˜ë„ë¡ 'ì»¨í…Œì´ë„ˆ'ë¼ëŠ” ë‹¨ìœ„ë¡œ íŒ¨í‚¤ì§•í•œë‹¤.

- ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì•±ì´ ì‹¤í–‰ë˜ë„ë¡ ë„ìš°ë©°, ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë…ë¦½ëœ í™˜ê²½ì—ì„œ ì•±ì´ í•­ìƒ ì¼ê´€ë˜ê²Œ ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤.

### ğŸ“– ë„ì»¤ ìš©ì–´

- ì´ë¯¸ì§€ : ì»¨í…Œì´ë„ˆìš© í…œí”Œë¦¿, `Dockerfile`ì„ ë¹Œë“œí•´ ì´ë¯¸ì§€ë¥¼ ë§Œë“ ë‹¤.

- ì»¨í…Œì´ë„ˆ : ë„ì»¤ì˜ ì´ë¯¸ì§€ë¥¼ ì‹¤í–‰í•œ ìƒíƒœ, ë…ë¦½ëœ ê³µê°„ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ëª©í‘œí•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì´ í• ë‹¹ëœë‹¤.

- Dockerfile : ì´ë¯¸ì§€ íŒŒì¼ì„ ì •ì˜í•˜ë©°, ì´ë¥¼ ë¹Œë“œí•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì œì‘í•œë‹¤.

- íƒœê·¸ : ì´ë¯¸ì§€ë¥¼ ì‹ë³„í•˜ëŠ” ë ˆì´ë¸”ê°’, `ì´ë¦„ : íƒœê·¸ëª…` í˜•íƒœë¡œ êµ¬ì„±ëœë‹¤.

- ë ˆí¬ì§€í† ë¦¬ : ì´ë¯¸ì§€ë¥¼ ëª¨ì•„ë‘ëŠ” ì €ì¥ì†Œ

- ë ˆì§€ìŠ¤íŠ¸ë¦¬ : ë ˆí¬ì§€í† ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì„œë¹„ìŠ¤

### âŒ¨ï¸ ë„ì»¤ CLI ëª…ë ¹ì–´

> [ìì£¼ ì“°ëŠ” ë„ì»¤ CLI ëª…ë ¹ì–´ ëª¨ìŒ](https://citronbanana.tistory.com/200)

<br>

### ğŸ‹ Docker ì‹¤í–‰í•´ë³´ê¸°

---

### ğŸ”– ì´ˆê¸° íŒŒì¼ ì„¸íŒ…

```Dockerfile
# Node.js ìµœì‹  LTS ë²„ì „ ì‚¬ìš©
FROM node:18-slim

# ì•± ë””ë ‰í„°ë¦¬ ìƒì„±
WORKDIR /app

# ì˜ì¡´ì„± íŒŒì¼ë“¤ì„ ë³µì‚¬
COPY package.json package-lock.json ./

# ì˜ì¡´ì„± ì„¤ì¹˜
RUN npm ci

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY . .

# ë¹Œë“œ ì‹¤í–‰
RUN npm run build

# ì•± ì‹¤í–‰
CMD ["npm", "start"]
```

- ì„¸íŒ… í›„ ë¹Œë“œë¥¼ í•˜ë©´ ì´ë¯¸ì§€ì˜ í¬ê¸°ê°€ ë‚˜ì˜ ê²½ìš° 1GBê°€ ë„˜ì–´ê°”ë‹¤..

- ì´ëŠ” `Node.js` ê°€ ì‹¤í–‰ëœ ê²ƒ ë•Œë¬¸ì´ë¯€ë¡œ ë‹¤ì‹œ ì„¤ì •í•œë‹¤.

```Dockerfile
FROM nginx:1.23.2-apline as start

COPY ./nginx/nginx.conf /etc/nginx/nginx.conf
COPY --from=build /app/build /usr/share/nginx/html

EXPOSE 3000

ENTRYPOINT ["nginx", "-g", "daemon off;"]
```

### â­ï¸ Next.jsë¡œ ë§Œë“  í”„ë¡œì íŠ¸ ë„ì»¤ë¼ì´ì¦ˆ

- Next.js ê°™ì€ ê²½ìš° `output: "standalone"` ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ í”„ë¡œë•ì…˜ ì‹¤í–‰ì— í•„ìš”í•œ íŒŒì¼ë“¤ë§Œ ì‹¤í–‰ ì¤€ë¹„ë¥¼ í•œë‹¤.

```dockerfile
# Step 1: Dependencies
FROM node:18-alpine as deps

WORKDIR /app

COPY package.json package-lock.json ./
RUN npm ci

# Step 2: Build
FROM node:18-alpine as build

WORKDIR /app

COPY --from=deps /app/node_modules ./node_modules
COPY . .

RUN npm run build

# Step 3: Runner
FROM node:18-alpine as runner

WORKDIR /app

ENV NODE_ENV production

# Copy necessary files from the build stage
COPY --from=build /app/public ./public
COPY --from=build /app/.next ./.next
COPY --from=build /app/node_modules ./node_modules
COPY --from=build /app/package.json ./package.json

# Expose the port the app runs on
EXPOSE 3000

# Command to run the application
CMD ["npm", "start"]
```

![alt text](image-3.png)

- ìœ„ ê°™ì€ ê²½ìš° ì™œì¸ì§„ ëª¨ë¥´ê² ëŠ”ë° `next.config.js`ì— `standalone` ì„ ì„¤ì •í•´ë„ íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•Šì•„ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ëº€ ì±„ë¡œ ì§„í–‰í–ˆë‹¤.

- ë°±ì—”ë“œ ì¹œêµ¬ì—ê²Œ ë¬¼ì–´ë³´ë‹ˆ í”„ë¡ íŠ¸ê°€ Docker ë¥¼ ì“¸ ì¼ì€ ê±°ì˜ ì—†ì„í…ë° ì™œ ê³µë¶€í•˜ëŠ” ê±°ëƒê³  ë¬¼ì–´ë´ì„œ í•  ë§ì´ ì—†ì—ˆë‹¤.. (ë‚˜ë„ ëª°ë¼)

### ğŸŒ ì§€ì†ì  í†µí•© ì„¤ì •

---

- Dockerì˜ ê²½ìš° ì§€ì†ì  ë°°í¬ë¥¼ ìœ„í•´ github ì €ì¥ì†Œë¥¼ ì„ íƒí•˜ê³ , ì§€ì†ì ìœ¼ë¡œ ìƒˆ ë²„ì „ ë°°í¬ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤.

<br>

### ğŸ”– ì •ë¦¬

- í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¼ë©´ ì ì–´ë„ ìì‹ ì´ ë§Œë“  ì•±ì„ ë„ì»¤ë¼ì´ì¦ˆ í•˜ëŠ” ë°©ë²• ì •ë„ëŠ” ìˆ™ì§€í•˜ì—¬ì•¼ í•œë‹¤.

- ë„ì»¤ ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ì€ ê° íšŒì‚¬ì˜ ë°©ì¹¨, ë°©í–¥ì„±, ì„œë¹„ìŠ¤ ë“± ì¹´í…Œê³ ë¦¬ë³„ë¡œ ëª¨ë‘ ë‹¤ë¥´ì§€ë§Œ ìµœì†Œí•œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê³  í™œìš©í•˜ëŠ” ë°©ì‹ì€ ëª¨ë‘ ë™ì¼í•˜ë¯€ë¡œ í•­ìƒ ìˆ™ì§€í•˜ì.
