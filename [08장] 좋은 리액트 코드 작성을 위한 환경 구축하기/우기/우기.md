# 8. ì¢‹ì€ ë¦¬ì•¡íŠ¸ ì½”ë“œ ì‘ì„±ì„ ìœ„í•œ í™˜ê²½ êµ¬ì¶•í•˜ê¸°

**ì¢‹ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•œ ESLintì™€ ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•Œì•„ë³´ì**

<br>

## 8.1 ESLintë¥¼ í™œìš©í•œ ì •ì  ì½”ë“œ ë¶„ì„

### âœ¨ JS ìƒíƒœê³„ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì •ì  ì½”ë“œ ë¶„ì„ ë„êµ¬ ESLintì— ëŒ€í•´ ì•Œì•„ë´…ì„¸~

<br>

### 8.1.1 ESLint ì‚´í´ë³´ê¸°

---

### ğŸ”– ESLint ì–´ë–»ê²Œ ì´ë ‡ê²Œ ìŒˆ@ë½•í•˜ê²Œ JS ì½”ë“œë¥¼ ë¶„ì„í•˜ëŠ” ê±¸ê¹Œ?

- JSì½”ë“œë¥¼ ë¬¸ìì—´ë¡œ ì½ëŠ”ë‹¤.

- JS ì½”ë“œë¥¼ ë¶„ì„ ê°€ëŠ¥í•œ íŒŒì„œ(parser)ë¡œ ì½”ë“œë¥¼ êµ¬ì¡°í™”í•œë‹¤.

- êµ¬ì¡°í™”í•œ AST(Abstract Syntax Tree)ë¼ í•˜ê³ , ì´ë¥¼ ê°ì¢… ê·œì¹™ê³¼ ëŒ€ì¡°í•œë‹¤.

- ê·œì¹™ ìœ„ë°˜ ì½”ë“œë¥¼ ì•Œë¦¬ê±°ë‚˜ ìˆ˜ì •í•œë‹¤.

### ğŸ–¥ï¸ ì½”ë“œ ë³€í™˜ í†ºì•„ë³´ê¸°

```jsx
const handleCancelClick = () => {
  setIsEditing(false);
  setRenewalTime(!renewalTime);
  cancelModalOff();
  updateFormData();
};
```

```js
{
  "type": "Program",
  "start": 0,
  "end": 322,                 // ì½”ë“œ ì‹œì‘
  "body": [
    {
      "type": "VariableDeclaration",
      "start": 181,
      "end": 322,
      "declarations": [
        {
          "type": "VariableDeclarator",
          "start": 187,                   // const ëº€ ë‚˜ë¨¸ì§€
          "end": 321,
          "id": {
            "type": "Identifier",
            "start": 187,
            "end": 204,                     // í•¨ìˆ˜ ì´ë¦„
            "name": "handleCancelClick"
          },
          "init": {
            "type": "ArrowFunctionExpression",
            "start": 207,                     // í™”ì‚´í‘œ í•¨ìˆ˜ì„ì„ ì˜ë¯¸
            "end": 321,
            "id": null,
            "expression": false,
            "generator": false,
            "async": false,
            "params": [],
            "body": {
              "type": "BlockStatement",
              "start": 213,
              "end": 321,                     // {} ë¸”ë¡ ìŠ¤í…Œì´íŠ¸ ì‹œì‘
              "body": [
                {
                  "type": "ExpressionStatement",
                  "start": 219,
                  "end": 239,
                  "expression": {
                    "type": "CallExpression",
                    "start": 219,
                    "end": 238,
                    "callee": {
                      "type": "Identifier",
                      "start": 219,
                      "end": 231,
                      "name": "setIsEditing"    // setIsEditing ì‹¤í–‰ ë¶€ë¶„
                    },
                    "arguments": [
                      {
                        "type": "Literal",
                        "start": 232,
                        "end": 237,
                        "value": false,
                        "raw": "false"
                      }
                    ],
                    "optional": false
                  }
                },
                {
                  "type": "ExpressionStatement",
                  "start": 244,
                  "end": 273,
                  "expression": {
                    "type": "CallExpression",
                    "start": 244,
                    "end": 272,
                    "callee": {
                      "type": "Identifier",
                      "start": 244,
                      "end": 258,
                      "name": "setRenewalTime"      // setRenewalTime ì‹¤í–‰ ë¶€ë¶„
                    },
                    "arguments": [
                      {
                        "type": "UnaryExpression",
                        "start": 259,
                        "end": 271,
                        "operator": "!",
                        "prefix": true,
                        "argument": {
                          "type": "Identifier",
                          "start": 260,
                          "end": 271,
                          "name": "renewalTime"     // setRenewalTimeì— ë“¤ì–´ê°„ ì¸ìˆ˜
                        }
                      }
                    ],
                    "optional": false
                  }
                },
                {
                  "type": "ExpressionStatement",
                  "start": 278,
                  "end": 295,
                  "expression": {
                    "type": "CallExpression",
                    "start": 278,
                    "end": 294,
                    "callee": {
                      "type": "Identifier",
                      "start": 278,
                      "end": 292,
                      "name": "cancelModalOff" // cancelModalOff ì‹¤í–‰ ë¶€ë¶„
                    },
                    "arguments": [],
                    "optional": false
                  }
                },
                {
                  "type": "ExpressionStatement",
                  "start": 300,
                  "end": 317,
                  "expression": {
                    "type": "CallExpression",
                    "start": 300,
                    "end": 316,
                    "callee": {
                      "type": "Identifier",
                      "start": 300,
                      "end": 314,
                      "name": "updateFormData"            // updateFormData ì‹¤í–‰ ë¶€ë¶„
                    },
                    "arguments": [],
                    "optional": false
                  }
                }
              ]
            }
          }
        }
      ],
      "kind": "const"
    }
  ],
  "sourceType": "module"
}
```

### ğŸ“š `espree` ì½”ë“œ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ESLintê°€ ë­˜ ìˆ˜ì •í•˜ê³  ë³€ê²½í• ì§€ ê²°ì •

```js
module.export = {
  meta: {
    type: "problem",
    docs: {
      description: "Disallow the use of `debugger`",
      recommended: true,
    },
    fixable: null, // ì½”ë“œ ìˆ˜ì • ë¶ˆê°€
    schema: [], // ì˜µì…˜ ë¯¸ì„¤ì •
  },
  create(context) {
    // ì‹¤ì œ ì½”ë“œì—ì„œ ë¬¸ì œì  í™•ì¸
    return {
      DebuggerStatement(node) {
        context.report({
          // debuggerStatement í™•ì¸ í›„ ë¦¬í¿
          node,
          message: "Unexpected 'debugger' statement.",
          fix: function (fixer) {
            return fixer.remove(node);
          },
        });
      },
    };
  },
};
```

<br>

### 8.1.2 eslint-pluginê³¼ eslint-config

---

- `eslint-plugin` ì€ ì–¸ê¸‰í–ˆë˜ ê·œì¹™ë“¤ì„ ëª¨ì•„ë†“ì€ íŒ¨í‚¤ì§€ì´ë©°, ëŒ€ì‹œ(-)ë¥¼ ë’¤ì— ë¶™ì—¬ ë‹¤ì–‘í•œ ìƒí™©ì— í•´ë‹¹í•˜ëŠ” ê·œì¹™ë“¤ì„ ì œê³µí•œë‹¤.

```bash
eslintrc
â”œâ”€ conf
â”‚  â”œâ”€ config-schema.js
â”‚  â””â”€ environments.js
â”œâ”€ dist
â”‚  â”œâ”€ eslintrc-universal.cjs
â”‚  â”œâ”€ eslintrc-universal.cjs.map
â”‚  â”œâ”€ eslintrc.cjs
â”‚  â””â”€ eslintrc.cjs.map
â”œâ”€ lib
â”‚  â”œâ”€ config-array
â”‚  â”‚  â”œâ”€ config-array.js
â”‚  â”‚  â”œâ”€ config-dependency.js
â”‚  â”‚  â”œâ”€ extracted-config.js
â”‚  â”‚  â”œâ”€ ignore-pattern.js
â”‚  â”‚  â”œâ”€ index.js
â”‚  â”‚  â””â”€ override-tester.js
â”‚  â”œâ”€ shared
â”‚  â”‚  â”œâ”€ ajv.js
â”‚  â”‚  â”œâ”€ config-ops.js
â”‚  â”‚  â”œâ”€ config-validator.js
â”‚  â”‚  â”œâ”€ deprecation-warnings.js
â”‚  â”‚  â”œâ”€ naming.js
â”‚  â”‚  â”œâ”€ relative-module-resolver.js
â”‚  â”‚  â””â”€ types.js
â”‚  â”œâ”€ cascading-config-array-factory.js
â”‚  â”œâ”€ config-array-factory.js
â”‚  â”œâ”€ flat-compat.js
â”‚  â”œâ”€ index-universal.js
â”‚  â””â”€ index.js
â”œâ”€ LICENSE
â”œâ”€ package.json
â”œâ”€ README.md
â””â”€ universal.js
```

- `eslint-config` ëŠ” ìœ„ì˜ `eslint-plugin` ì˜ ë¬¶ìŒ íŒë§¤ íŒ¨í‚¤ì§€ë¼ê³  ë³¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì— ê±¸ì³ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•œ ESLint ê´€ë ¨ ì„¤ì •ì„ ì œê³µí•œë‹¤.

```js
{
  "parser": "@typescript-eslint/parser",
  "extends": [
    "next/core-web-vitals",
    "next",
    "eslint:recommended",
    "plugin:import/recommended",
    "plugin:import/typescript",
    "plugin:@typescript-eslint/recommended",
    "plugin:react-hooks/recommended",
    "plugin:tailwindcss/recommended",
    "prettier"
  ],
  "plugins": ["import", "@typescript-eslint", "react-hooks", "tailwindcss", "prefer-arrow"],
  "rules": {
    "import/order": [
      "error",
      {
        "groups": [
          "external", // ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
          "builtin", // Node.js ë‚´ì¥ ëª¨ë“ˆ
          "internal", // ê²½ë¡œ ë³„ì¹­ (@)
          "parent", // ë¶€ëª¨ ê²½ë¡œ (..)
          "sibling", // ê°™ì€ ê²½ë¡œ (./)
          "index", // í˜„ì¬ ë””ë ‰í† ë¦¬ (./)
          "object"
        ],
        "pathGroups": [
          {
            "pattern": "react*",
            "group": "external",
            "position": "before"
          }
        ],
        "pathGroupsExcludedImportTypes": ["react*"]
      }
    ],
    "arrow-body-style": ["error", "always"],
    "curly": ["error"],
    "max-depth": ["error", 4],
    "import/export": "warn",
    "react/react-in-jsx-scope": "off",
    "prefer-arrow/prefer-arrow-functions": [
      "error",
      {
        "disallowPrototype": true,
        "singleReturnOnly": false,
        "classPropertiesAllowed": false
      }
    ]
  },
  "settings": {
    "import/resolver": {
      "typescript": true
    }
  }
}
```

### ğŸ‘ ì›ë˜ ì§ì ‘ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ë‚¨ì´ í•´ì¤€ ìš”ë¦¬ê°€ ë” ë§›ìˆë‹¤.

- ê°œë°œìê°€ ì§ì ‘ íŒ¨í‚¤ì§€ë¥¼ ì§œëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³ , ì¼ë¶€ IT ê¸°ì—…ì—ì„œ ë§Œë“¤ì–´ë‘” í…œí”Œë¦¿ë“¤ì„ í™œìš©í•˜ëŠ” ëŠë‚Œìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•œë‹¤.

### ê°œì¶”! (ê°œë°œì ì¶”ì²œ)

- `eslint-config-airbnb`

  - ê°€ì¥ ëŒ€ì¤‘ì ì¸ `eslint-config` í…œí”Œë¦¿ì´ë‹¤.

- `titicaca/tripole-config-kit`

  - ìœ ì§€ë³´ìˆ˜ê°€ í™œë°œí•œ í¸ì— ì†í•˜ëŠ” `config` ì´ë©°, airbnbì˜ `config` ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì§€ ì•ŠëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ì™ ë§Œí•œ ê·œì¹™ì„ ì œê³µí•˜ì—¬ ì‚¬ìš© ì‹œ í° ì§€ì¥ì´ ì—†ë‹¤.

  - ë˜í•œ ì™¸ë¶€ ì œê³µ ê·œì¹™ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì¡´ì¬í•˜ì—¬ ê° í™˜ê²½ì— ë§ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- `eslint-config-next`

  - `Next.js` ë¥¼ ì´ìš©í•œ í”„ë¡œì íŠ¸ëŠ” ê·¸ëƒ¥ ì´ë†ˆ ì“°ì.

<br>

### 8.1.3 ë‚˜ë§Œì˜ ESLint ê·œì¹™ ë§Œë“¤ê¸°

---

### ğŸ”– ë‚˜ë§Œì˜ ESLint ê·œì¹™ì„ ë§Œë“¤ì–´ ë‚˜ì—ê²Œ ê°€ì¥ ìµìˆ™í•œ ê·œì¹™ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì

- ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê·œì¹™ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ì—¬ ì ìš©í•˜ëŠ” ê²ƒì€ ë§¤ìš° ìœ ìš©í•˜ë‹¤.

```js
// no improt react
module.exports = {
  rules: {
    'no-restricted-imports' : [
      'error',
      {
        path: [
          {
            name: 'react',
            importNames: ['default'] // import reactë§Œ ì œì™¸í•˜ê¸° ìœ„í•¨
            message: 'ì´ì œë¶€í„´ import reactëŠ” ì•ˆí•´ë„ ë¼!'
          }
        ]
      }
    ]
  }
}
```

- ì•„ì˜ˆ ìƒˆë¡œìš´ ë‚˜ë§Œì˜ ê·œì¹™ì„ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

```js
// new Date ê¸ˆì§€í•˜ê¸°
module.exports = {
  meta: {
    type: "problem",
    docs: {
      description: "Disallow use of `new Date()` without arguments",
      category: "Possible Errors",
      recommended: false,
    },
    fixable: "code", // ì½”ë“œ ìˆ˜ì • ê°€ëŠ¥
    schema: [], // ì˜µì…˜ ë¯¸ì„¤ì •
  },
  create(context) {
    return {
      NewExpression(node) {
        if (node.callee.name === "Date" && node.arguments.length === 0) {
          // ì½”ë“œ ê°ì²´ì˜ ì´ë¦„ì´ Dateì„ê³¼ ë™ì‹œì— ì¸ìˆ˜ì˜ ê¸¸ì´ê°€ 0ì¼ ê²½ìš°
          context.report({
            node,
            message: "Use of `new Date()` without arguments is not allowed.",
            fix: function (fixer) {
              // ìë™ ìˆ˜ì •: `new Date()`ë¥¼ `new Date(/* specify arguments */)`ë¡œ ë³€ê²½
              return fixer.replaceText(node, "new Date(/* specify arguments */)");
            },
          });
        }
      },
    };
  },
};
```

### ğŸ“‚ ë§Œë“  ê·œì¹™ë“¤ì„ ë°°í¬í•´ë³´ì!

- ë¨¼ì € `yo`ì™€ `generate-eslint` ë¥¼ í™œìš©í•´ `eslint-plugin` êµ¬ì„± í™˜ê²½ì„ ë§Œë“ ë‹¤.

- êµ¬ì„±ëœ ë””ë ‰í† ë¦¬ ë° íŒŒì¼ì—ì„œ `rules/no-new-date.js` íŒŒì¼ì„ ì—´ê³  ì•ì—ì„œ ì‘ì„±í•œ ê·œì¹™ì„ ë¶™ì—¬ë„£ëŠ”ë‹¤.

- `npm publish` ë¡œ ë°°í¬í•˜ê³  ì›í•˜ëŠ” í”„ë¡œì íŠ¸ì— ì„¤ì¹˜ ë° ì‚¬ìš©í•œë‹¤.

<br>

### 8.1.4 ì£¼ì˜í•  ì 

---

### ğŸ”– ì˜ëª» ì„¤ì •í•˜ë©´ ì›ì¹˜ ì•ŠëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.

- ì½”ë“œì˜ í¬ë©”íŒ…ì„ ë•ëŠ” `Prettier` ê³¼ì˜ ì¶©ëŒì´ ì¼ì–´ë‚  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•­ìƒ ì£¼ì˜í•´ì•¼ í•œë‹¤.

  - ì„œë¡œ ì¶©ëŒí•˜ì§€ ì•Šê²Œë” ê·œì¹™ì„ ì˜ ì„¤ì •í•œë‹¤.

  - JS, TSëŠ” ESLintì— ë§¡ê¸°ê³ , ê·¸ ì™¸ëŠ” `Prettier` ì— ë§¡ê¸´ë‹¤.

- íŠ¹ì • ê·œì¹™ì„ ì„ì‹œë¡œ ì œì™¸í•˜ê³  ì‹¶ì€ ê²½ìš° `react-hooks/no-exhaustive-deps` ì£¼ì„ì„ ì‚¬ìš©í•œë‹¤.

  - ëª¨ë“  ê·œì¹™ì€ ì¡´ì¬í•˜ëŠ” ì´ìœ ê°€ ìˆìœ¼ë‹ˆê¹Œ í•‘ê³„ëŒ€ì§€ ë§ê³  ì˜ ì ê²€í•˜ê³  ì‚¬ìš©í•˜ì

- ESLint ë²„ì „ì´ ì¶©ëŒí•˜ì—¬ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

  - ì„¤ì¹˜í•˜ê³ ì í•˜ëŠ” `config` ë°‘ `plugin` ë° í”„ë¡œì íŠ¸ê°€ ì§€ì›í•˜ëŠ” ë²„ì „ì„ ì˜ í™•ì¸í•´ì•¼í•œë‹¤.

<br>

### 8.1.5 ì±… ì •ë¦¬ + ì£¼ê´€ì ì¸ ì •ë¦¬

### ğŸ”– ì±… ì •ë¦¬

- ESLintëŠ” ê°œë°œìì˜ ìˆŸê°€ë½ê³¼ë„ ê°™ë‹¤.

- ì˜ ì •ë¦¬ëœ ê·œì¹™ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì§ì ‘ ì»¤ìŠ¤í…€í•˜ëŠ” ë“± ììœ ë„ê°€ ë†’ì§€ë§Œ ê·¸ë§Œí¼ ì•Œë§ê²Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

- ìµìˆ™í•´ì§„ë‹¤ë©´ ë³¸ì¸ë§Œì˜ `eslint-config`ë¥¼ ë§Œë“¤ì–´ë³´ëŠ” ê²ƒë„ í° ë„ì›€ì´ ë  ê²ƒì´ë‹¤.

### ğŸ·ï¸ ì£¼ê´€ì ì¸ ì •ë¦¬

- ESLintëŠ” í•­ìƒ ê°€ê¹Œì´ ìˆìœ¼ë‚˜ ë§‰ìƒ ë³´ë©´ ì–´ìƒ‰í•œ ì¹œêµ¬ë¼ê³  ìƒê°í•œë‹¤.

- ESLintì˜ ê·œì¹™ë“¤ì€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ì´ìœ ê°€ ìˆìœ¼ë¯€ë¡œ, í•­ìƒ ì‹ ê²½ì“°ë©° ì˜ ì‚¬ìš©í•˜ì.

<br>

## 8.2 ë¦¬ì•¡íŠ¸ íŒ€ì´ ê¶Œì¥í•˜ëŠ” ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

### âœ¨ í”„ë¡ íŠ¸ì—”ë“œëŠ” í¼ë¸”ë¦¬ì‹±ë§Œì´ ë‹¤ê°€ ì•„ë‹ˆë¯€ë¡œ, ê°ê°ì˜ ê°œë°œ í™˜ê²½ì—ì„œ í•­ìƒ í…ŒìŠ¤íŠ¸í•´ì•¼ í•œë‹¤.

<br>

### 8.2.1 React Testing Libraryë€?

---

### ğŸ”– DOM Testing Libraryë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ HTMLì´ ì—†ëŠ” í™˜ê²½ì—ì„œ HTML ë° DOMì„ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŒ…ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„

```js
const jsdom = require("jsdom");

const { JSDOM } = jsdom;

const dom = new JSDOM("<!DOCTYPE html><p>Hello world</p>");

console.log(dom.window.document.querySelector("p").textContext);
```

- `jsdom` ì„ ì‚¬ìš©í•´ HTMLì´ ìˆëŠ” ê²ƒì²˜ëŸ¼ DOMì„ ë¶ˆëŸ¬ì™€ ì¡°ì‘ ê°€ëŠ¥í•˜ë‹¤.

- ì‹¤ì œë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ì§€ ì•Šì•„ë„ ì›í•˜ëŠ”ëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.

<br>

### 8.2.2 ìë°”ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ì˜ ê¸°ì´ˆ

---

### ğŸ”– ê¸°ë³¸ì ì¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ë²•ì„ ì•Œì•„ë³´ì

```js
// í…ŒìŠ¤íŠ¸í•  í•¨ìˆ˜
function sum(a, b) {
  return a + b;
}

// í…ŒìŠ¤íŠ¸í•  ì½”ë“œ
let actual = sum(1, 2);
let expected = 3;

if (expected !== actual) {
  throw new Error(`${expectred}ëŠ” ê¸°ëŒ€ì™€ ë‹¤ë¥´ë‹¤!`);
}

actual = sum(2, 3);
expected = 4;

if (expected !== actual) {
  throw new Error(`${expectred}ëŠ” ê¸°ëŒ€ì™€ ë‹¤ë¥´ë‹¤!`);
}
```

- ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì´ ì˜ˆìƒí•˜ëŠ” ë‹µê³¼ ê°™ë‹¤ë©´ ì´ê²ƒì— ëŒ€í•´ ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ë„ë¡ ì½”ë“œë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ì´ë‹¤.

```js
// Node.jsì˜ assert
const assert = require("assert");

function sum(a, b) {
  return a + b;
}

assert.equal(sum(1, 2), 3);
assert.equal(sum(2, 2), 5); // AssertionError ...
```

- `Node.js` ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ `assert` ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤.

- ë˜í•œ `equal` ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ ê²°ê³¼ê°’ì„ ìƒí™©ì— ë§ê²Œ ë³´ì—¬ì£¼ëŠ” í‚¤ë“¤ì´ ì¡´ì¬í•œë‹¤.

### â—í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë‹¨ìˆœíˆ ê°’ë¿ë§Œ ì•„ë‹ˆë¼ í…ŒìŠ¤íŠ¸ì˜ ê´€í•œ ì‹¤ì œ ì •ë³´ ë˜í•œ ë°˜í™˜í•´ì•¼ í•œë‹¤.

- ì´ëŠ” í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´ ë³¼ ìˆ˜ ìˆë‹¤.

  - `Jest`, `Mocha`, `Karma`, `Jasmine` ë“±ì˜ ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬ê°€ ì¡´ì¬í•œë‹¤.

  - ê·¸ì¤‘ì—ì„œë„ `Jest` ì˜ `expect` íŒ¨í‚¤ì§€ë¥¼ ì•Œì•„ë³´ì

```js
// add.js
function add(a, b) {
  return a + b + 1; // ì˜ë„ì ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ë„£ìŒ
}

module.exports = add;

const add = require("./add");

test("adds 1 + 2 to equal 3", () => {
  expect(add(1, 2)).toBe(3);
});
```

```bash
FAIL  ./add.test.js
âœ• adds 1 + 2 to equal 3 (5ms)

â— adds 1 + 2 to equal 3

  expect(received).toBe(expected) // Object.is equality

  Expected: 3
  Received: 4

  3 | test('adds 1 + 2 to equal 3', () => {
  4 |     expect(add(1, 2)).toBe(3);
  5 | });
    |                        ^

  at Object.<anonymous> (add.test.js:4:24)
```

- `Jest` ê°€ ì œê³µí•˜ëŠ” ìì²´ì ì¸ 'ê¸€ë¡œë²Œ' ê°’ë“¤ì„ ì´ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì •ë³´ë¥¼ ì„í¬íŠ¸ í•˜ì§€ ì•Šê³  íš¨ìœ¨ì ìœ¼ë¡œ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

<br>

### 8.2.3 ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°

---

### ğŸ”– ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê³  ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„ìš” ì‹œ íŠ¹ì • ì•¡ì…˜ì„ ìˆ˜í–‰í•˜ë©°, ë‘ ê³¼ì •ì„ í†µí•´ ê¸°ëŒ€ì™€ ì‹¤ì œë¥¼ ë¹„êµí•œë‹¤.

- `create-react-app` ì—ëŠ” ì´ë¯¸ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤.

```bash
npx create-react-app react-test --templete typescript
```

```jsx
// src/App.tsx
function App() {
  return (
    <div className="App">
      <p>learn react</p>
    </div>
  );
}

// src/App.test.tsx
import React from "react";
import { render, screen } from "@testing-library/react";
import App from "./App";

test("renders learn react link", () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});
```

- `App` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê³  'learn react' ë¼ëŠ” ë¬¸ìì—´ì„ ê°€ì§„ DOM ìš”ì†Œë¥¼ ì°¾ëŠ”ë‹¤.

- `expect(linkElement).toBeInTheDocument()` ì–´ì„¤ì…˜ì„ í™œìš©í•´ í•´ë‹¹ ìš”ì†Œê°€ document ë‚´ë¶€ ìš”ì†Œì¸ì§€ í™•ì¸í•œë‹¤.

  - `getBy`, `findBy`, `queryBy` ë“± ë‹¤ì–‘í•œ ì¡°ê±´ì˜ í…ŒìŠ¤íŒ… ì–´ì„¤ì…˜ì´ ì¡´ì¬í•œë‹¤.

<br>

### ğŸ·ï¸ ì •ì  ì»´í¬ë„ŒíŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì€ ìƒíƒœê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ í•­ìƒ ê²°ê³¼ê°€ ê°™ìœ¼ë¯€ë¡œ ì–´ë µì§€ ì•Šë‹¤.

```js
const InteractiveComponent: React.FC = () => {
  const [count, setCount] = useState(0);

  return (
    <div>
      <h1>ì •ì  ì»´í¬ë„ŒíŠ¸</h1>
      <p>í˜„ì¬ ê°’: {count}</p>
      <button onClick={() => setCount(count + 1)}>ì¦ê°€</button>
    </div>
  );
};

import React from "react";
import { render, screen, fireEvent } from "@testing-library/react";
import InteractiveComponent from "./InteractiveComponent";

describe("InteractiveComponent", () => {
  beforeEach(() => {
    render(<InteractiveComponent />);
  });

  it("ëª¨ë“  ìš”ì†Œê°€ ì˜¬ë°”ë¥´ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤.", () => {
    const headingElement = screen.getByText(/ì •ì  ì»´í¬ë„ŒíŠ¸/i);
    const paragraphElement = screen.getByText(/í˜„ì¬ ê°’: 0/i);
    const buttonElement = screen.getByText(/ì¦ê°€/i);

    expect(headingElement).toBeInTheDocument();
    expect(paragraphElement).toBeInTheDocument();
    expect(buttonElement).toBeInTheDocument();
  });

  it("ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ countê°€ ì¦ê°€í•©ë‹ˆë‹¤.", () => {
    const buttonElement = screen.getByText(/ì¦ê°€/i);
    fireEvent.click(buttonElement);

    const updatedParagraphElement = screen.getByText(/í˜„ì¬ ê°’: 1/i);
    expect(updatedParagraphElement).toBeInTheDocument();
  });
});
```

- ì—¬ê¸°ì„œë„ `beforeEach`, `describe`, `it` ë“± ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ìƒí™©ì— ë§ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

<br>

### ğŸ·ï¸ ë™ì  ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì‹ ê²½ì“¸ ë¶€ë¶„ì´ ë§ì•„ì ¸ í›¨ì”¬ ì–´ë µë‹¤.

- ì •ì  ì»´í¬ë„ŒíŠ¸ì™€ ê°™ì€ ìˆœìˆ˜í•œ 'ë¬´ìƒíƒœ' ì»´í¬ë„ŒíŠ¸ëŠ” ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ì—¬ëŸ¬ ê°’ë“¤ì„ ì‹ ê²½ì“¸ í•„ìš”ê°€ ì—†ì§€ë§Œ, ë™ì ì€ ë‹¤ë¥´ë‹¤.

```jsx
// src/DynamicComponent.tsx
const DynamicComponent: React.FC = () => {
  const [text, setText] = useState("");

  const handleClick = () => {
    alert(`Button clicked with text: ${text}`);
  };

  return (
    <div>
      <h1>Dynamic Component</h1>
      <input type="text" placeholder="Type something..." value={text} onChange={(e) => setText(e.target.value)} />
      <button onClick={handleClick}>Click Me</button>
      <p>You typed: {text}</p>
    </div>
  );
};

// src/DynamicComponent.test.tsx
import React from "react";
import { render, screen, fireEvent } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import DynamicComponent from "./DynamicComponent";

const setup = () => {
  const utils = render(<DynamicComponent />);
  const input = screen.getByPlaceholderText(/Type something.../i);
  const button = screen.getByText(/Click Me/i);
  return {
    input,
    button,
    ...utils,
  };
};

describe("DynamicComponent", () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  it("renders the initial state correctly", () => {
    const { input, button } = setup(); // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë° í•„ìš” ìš”ì†Œ ë°˜í™˜
    const headingElement = screen.getByText(/Dynamic Component/i);
    const paragraphElement = screen.getByText(/You typed:/i);

    expect(headingElement).toBeInTheDocument();
    expect(input).toBeInTheDocument();
    expect(button).toBeInTheDocument();
    expect(paragraphElement).toHaveTextContent("You typed:");
  });

  it("updates the text as the user types", async () => {
    const { input } = setup();
    await userEvent.type(input, "Hello, world!"); // ìœ ì €ê°€ íƒ€ì´í•‘í•˜ëŠ” ê²ƒì„ í‰ë‚´

    const updatedParagraphElement = screen.getByText(/You typed: Hello, world!/i);
    expect(updatedParagraphElement).toBeInTheDocument();
  });

  it("calls handleClick when button is clicked", () => {
    const { button } = setup();
    const handleClickSpy = jest.spyOn(window, "alert").mockImplementation(() => {}); // alert í•¨ìˆ˜ë¥¼ ëª¨í‚¹í•˜ì—¬ ì‹¤ì œë¡œ ë™ì‘í•˜ì§„ ì•Šë„ë¡ êµ¬í˜„

    fireEvent.click(button); // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜
    expect(handleClickSpy).toHaveBeenCalledWith("Button clicked with text: ");
  });

  it("calls handleClick with the correct text", async () => {
    const { input, button } = setup();
    await userEvent.type(input, "Hello, world!");
    const handleClickSpy = jest.spyOn(window, "alert").mockImplementation(() => {});

    fireEvent.click(button);
    expect(handleClickSpy).toHaveBeenCalledWith("Button clicked with text: Hello, world!");
  });
});
```

- ì—¬ê¸°ì„œë„ ë§ˆì°¬ê°€ì§€ë¡œ `userEvent.type`, `jest.spyOn(window, 'alert').mockImplementation()` ë“± ìƒí™©ì— ë§ëŠ” ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

<br>

### ğŸ·ï¸ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œìƒ ì»´í¬ë„ŒíŠ¸ë„ í…ŒìŠ¤íŠ¸ í•´ë³´ì

- `fetch` ê°€ ì¶”ê°€ë¨ìœ¼ë¡œì„œ ì‹ ê²½ì¨ì•¼í•  ì‚¬í•­ì´ ë”ìš± ë§ì•„ì¡Œë‹¤...

```js
// src/mocks/handlers.ts
import { rest } from "msw";

export const handlers = [
  rest.get("/api/data", (req, res, ctx) => {
    return res(ctx.status(200), ctx.json({ message: "Hello from the mocked API!" }));
  }),
];
// src/mocks/server.ts
import { setupServer } from "msw/node";
import { handlers } from "./handlers";

export const server = setupServer(...handlers);

// src/FetchComponent.test.tsx
import React from "react";
import { render, screen, waitFor } from "@testing-library/react";
import { server } from "./mocks/server";
import { rest } from "msw";
import FetchComponent from "./FetchComponent";

// MSW ì„œë²„ ì‹œì‘ ë° ì¢…ë£Œ ì„¤ì •
beforeAll(() => server.listen());
afterEach(() => server.resetHandlers()); // ì„œë²„ë¥¼ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ë˜ëŒë¦¼
afterAll(() => server.close());

test("renders fetched data correctly", async () => {
  render(<FetchComponent />);

  // ë¡œë”© í…ìŠ¤íŠ¸ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
  expect(screen.getByText("Loading...")).toBeInTheDocument();

  // ë°ì´í„°ê°€ í‘œì‹œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
  await waitFor(() => {
    expect(screen.getByText("Message: Hello from the mocked API!")).toBeInTheDocument();
  });
});

test("handles server error", async () => {
  // API ìš”ì²­ì„ ì‹¤íŒ¨í•˜ë„ë¡ ëª¨í‚¹
  server.use(
    rest.get("/api/data", (req, res, ctx) => {
      return res(ctx.status(500), ctx.json({ error: "Internal Server Error" }));
    })
  );

  render(<FetchComponent />);

  // ë¡œë”© í…ìŠ¤íŠ¸ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
  expect(screen.getByText("Loading...")).toBeInTheDocument();

  // ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
  await waitFor(() => {
    expect(screen.getByText("Error: Internal Server Error")).toBeInTheDocument();
  });
});
```

- MSWëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ í™œìš©í•´ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ëŠ” ë°©ì‹ìœ¼ë¡œ ëª¨í‚¹ì„ êµ¬í˜„í•˜ì—¬ ê°„í¸í•˜ê³ , ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ìˆ˜ì›”í•˜ê²Œ ë™ì‘í•œë‹¤.

- ë°ì´í„° ëª¨í‚¹ì„ í™œìš©í•´ ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì•¼ í•˜ëŠ” ë¡œì§ íŠ¹ì„± ìƒ ì˜ì¡´í•´ì•¼ í•˜ëŠ” ë°ì´í„°ì— ëŒ€í•œ ë¶„ë¦¬ë¥¼ ì§„í–‰í•˜ê³  ì½”ë“œ ìì²´ í…ŒìŠ¤íŠ¸ì— ë”ìš± ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

### [ëª¨í‚¹ì— ëŒ€í•´ ì•Œì•„ë³´ì](https://cheeseb.github.io/testing/react-testing-mocking/)

<br>

### 8.2.4 ì‚¬ìš©ì ì •ì˜ í›… í…ŒìŠ¤íŠ¸í•˜ê¸°

---

### ğŸ”– ì‚¬ìš©ì ì •ì˜ í›…ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ react-hooks-testing-library ë¥¼ í™œìš©í•´ë³´ì

- `useEffectDebugger` í›…ì„ í™œìš©í•´ ì–´ë–¤ `props`ì˜ ë³€ê²½ìœ¼ë¡œ ë¦¬ë Œë”ë§ ëëŠ”ì§€ í™•ì¸í•œë‹¤.

```jsx
// src/hooks/useEffectDebugger.ts
import { useEffect, useRef } from 'react';

const useEffectDebugger = (effect: React.EffectCallback, dependencies: any[], dependencyNames: string[]) => {
  const previousDepsRef = useRef<any[]>();

  useEffect(() => {
    const changes: { [key: string]: { from: any; to: any } } = {};
    const previousDeps = previousDepsRef.current;

    dependencies.forEach((dep, i) => {
      if (previousDeps && previousDeps[i] !== dep) {
        changes[dependencyNames[i]] = {
          from: previousDeps[i],
          to: dep,
        };
      }
    }); // ë­ ë•Œë¬¸ì— ë¦¬ë Œë”ë§ ëœê±´ì§€ ë¹„êµ

    if (Object.keys(changes).length) {
      console.log('[useEffectDebugger] Dependency changes:', changes);
    } // ë³€ê²½ ì‚¬í•­ì´ ìˆë‹¤ë©´ ì²´í¬

    previousDepsRef.current = dependencies;
    effect();
  }, dependencies);
};

export default useEffectDebugger;
```

<br>

### 8.2.5 í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸°ì— ì•ì„œ ê³ ë ¤í•´ì•¼ í•  ì 

---

### ğŸ”– í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì–¼ë§ˆë‚˜ ì˜ í…ŒìŠ¤íŠ¸ ëëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì§€í‘œì§€ë§Œ, ë§¹ì‹ í•´ì„  ì•ˆëœë‹¤.

- í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì „ ìš°ì„ ê³¼ì œëŠ” ì•±ì—ì„œ ê°€ì¥ ì·¨ì•½í•˜ê±°ë‚˜ ì¤‘ìš”í•œ ë¶€ë¶„ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ë‹¤.

- ì•±ì˜ ê°€ì¥ í•µì‹¬ì ì¸ ë¶€ë¶„ë¶€í„° í•˜ë‚˜í•˜ë‚˜ í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , í•­ìƒ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆì— ëŒ€í•œ í™•ì‹ ì„ ì–»ê¸° ìœ„í•´ ë…¸ë ¥í•˜ì

<br>

### 8.2.6 ê·¸ ë°–ì— í•´ë³¼ ë§Œí•œ ì—¬ëŸ¬ ê°€ì§€ í…ŒìŠ¤íŠ¸

---

- ìœ ë‹› í…ŒìŠ¤íŠ¸ : ê°ê°ì˜ ì½”ë“œë‚˜ ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ë¶„ë¦¬ëœ ê²½ìš° ì˜ë„ëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ ê²€ì¦

- í†µí•© í…ŒìŠ¤íŠ¸ : ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ê¸°ëŠ¥ìœ¼ë¡œ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦

- ì—”ë“œ íˆ¬ ì—”ë“œ : E2E í…ŒìŠ¤íŠ¸ë¼ ì§€ì¹­í•˜ë©° ì‹¤ì œ ì‚¬ìš©ìì™€ ê°™ì€ ë¡œë´‡ì„ í™œìš©í•´ ì•± ê¸°ëŠ¥ì„ ì „ì²´ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

### ğŸ‘ E2Eê¹Œì§€ ê°€ëŠ”ê±´ ì–´ë µì§€ë§Œ, ê·¸ë§Œí¼ ìì‹ ê°ì´ ìƒê¸¸ ê²ƒì´ë‹¤.

<br>

### 8.2.7 ì±… ì •ë¦¬ + ì£¼ê´€ì ì¸ ì •ë¦¬

---

### ğŸ”– ì±… ì •ë¦¬

- í…ŒìŠ¤íŠ¸ëŠ” ê²°ê³¼ë¬¼ì´ ì •í•´ì ¸ìˆëŠ” ì•±ê³¼ ë‹¤ë¥´ê²Œ ë‹¤ì–‘í•˜ê²Œ ì½”ë“œë¥¼ ì‹œë„í•  ìˆ˜ ìˆë‹¤.

- ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ê¶ê·¹ì ìœ¼ë¡œ ì¶”êµ¬í•˜ëŠ” ëª©í‘œëŠ” ê²°êµ­ ì•±ì´ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.

- ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ëŒ€í•œ ì‘ì„±ê³¼ ì´í•´, í™•ì‹ ì€ ê²°êµ­ ì†Œí”„íŠ¸ì›¨ì–´ì˜ í’ˆì§ˆê³¼ ì§ê²°ëœë‹¤.

### ğŸ·ï¸ ì£¼ê´€ì ì¸ ì •ë¦¬

- ë¦¬ì•¡íŠ¸ ë° ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ë§Œìœ¼ë¡œë„ ë²…ì°¨ë‹¤ê³  ìƒê°í–ˆëŠ”ë° ì •ë§ë¡œ ì‰½ì§€ ì•Šë‹¤.

- í…ŒìŠ¤íŠ¸ ì½”ë“œ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í™œìš©ì€ ë¨¼ ë¯¸ë˜ê² ì§€ë§Œ, ì§€ê¸ˆë¶€í„° ì¡°ê¸ˆì”© ìµí˜€ë†“ëŠ”ë‹¤ë©´ ë¶„ëª… ë‚˜ì¤‘ì— í° ë„ì›€ì´ ë  ê²ƒì´ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
