# 2. 리액트 핵심 요소 깊게 살펴보기

**리액트를 이루는 핵심 개념들이 자바스크립트를 토대로 어떻게 동작하는지 알아보자고~**

## 2.1 JSX란?

✨ JSX는 페이스북이 소개한 새로운 구문이지만, 리액트의 전유물만은 아니다.

- 종속적이지 않고, 독자적이며, JS의 일부 또한 아니므로 트랜스파일러를 거쳐야 JS가 이해 가능한 문법으로 완성되며, XML 스타일의 트리 구문 작성에 큰 도움을 준다.

### 2.1.1 JSX의 정의

---

<br>

🔖 `JSXElement`, `JSXAttributes`, `JSXChildren`, `JSXStrings` 라는 4가지 컴포넌트를 기반으로 한다.

🏷️ `JSXElement`

- 가장 기본적인 요소로, HTML의 요소와 비슷한 역할이다. 다음 조건들을 하나라도 충족해야 한다.

  1. JSXOpeningElement : 일반적으로 볼 수 있는 요소, 시작하는 요소이다.

  2. JSXClosingElement : 종료를 알리는 요소로, OpeningEle(간추려서)로 시작 시 이걸로 끝내야 한다. (한 쌍)

  3. JSXSelfClosingElement : 요소가 시작되고 스스로 종료되는 형태이다. `</script>`와 동일한 형태이다.

  4. JSXFragment : 아무 요소가 없는 형태로 `<> element.. </>` 형태로 사용한다.

<br>

👍 알고 가기 좋은 상식!

- 요소명은 '대문자'로 시작해야 하며, 그 이유는 HTML 구문과 합쳐진 형태의 JSX에서 태그와 컴포넌트를 구분하기 위함이다.

<br>

✅ `JSXElementName`

- `JSXElement`의 요소 이름으로 사용 가능한 것들을 의미한다.

  - `JSXIdentifier` : JSX 내부에서 사용 가능한 식별자를 의미 (JS 식별자 규칙과 동일)

  ```jsx
    // 가능
    function valid() {
      return <$></$>
    }
    // 불가능
    function invalid () {
      return <1></1>
    }
  ```

  - `JSXNamespacedName` : 서로 다른 식별자를 이어주는 것도 하나의 식별자로 판별 (두개 이상 X)

  ```jsx
  // 가능
  function valid() {
    return <foo:bar></foo:bar>;
  }
  ```

  - `JSXMemberExpression` : '.'를 통해 서로 다른 식별자를 이어주는 것을 의미 ('.' 여러개 사용O, NameSpacedName 과 섞어쓰기 X)

  ```jsx
  // 가능
  function valid() {
    return <foo.bar></foo.bar>;
  }
  ```

  <br>

✅ `JSXAttribute`

- `JSXElement`에 부여 가능한 속성을 의미한다. (필수값X, 존재하지 않을 시 에러X)

  - `JSXSpreadAttributes` : JS의 전개 연산자와 동일한 역할을 한다. (보통 객체 형태의 Prop의 키들을 한번에 내릴 때 많이 사용했다.)

  ```jsx
  // 단순히 값 뿐만 아니라 모든 표현식이 존재할 수 있다.
  function valid() {
    const attribute = {
      className: "Div",
      style: { display: "flex" },
    };
    return <div {...attribute}>hi~</div>;
  }
  ```

  - `JSXAttribute` : 속성을 나타내는 키와 값으로 표현한다. (키는 JSXAttributeName, 값은 JSXAttributeValue로 불림)

  ```jsx
  function valid() {
    // 문자열
    return <div text="text" />;

    // AssignmentExpression : 값 할당에 사용하는 표현식
    return <div text={text} />;

    // JSXElement : 다른 JSX요소도 할당 가능
    return <div attribute={<div>hi</div>} />;
  }
  ```

  <br>

✅ `JSXChildren`

- `JSXElement`의 자식을 나타낸다. 기본적으로 속성을 가진 트리 구조를 나타내기 위해 만들었으므로 Children 또한 존재한다.

  - `JSXChild` : 기본 단위이며, 존재하지 않아도 상관없다. (필요 개수의 기본값 : 0)

  ```jsx
  function valid() {
    // 문자열
    return <div>{"hi"}</div>;

    // JSXElement & JSXFragment
    return <div>{<p>hi~</p>}</div>;

    // JSXChildExpression : JS의 표현식 또한 할당 가능
    return <div>{(() => "foo")()}</div>;
  }
  ```

  <br>

✅ `JSXStrings`

- `JSXAttributeValue`와 `JSText`는 HTML과 JSX 사이의 복붙을 쉽게 할 수 있도록 설계되어 있다. HTML에서 사용 가능한 문자열은 JSX에서도 모두 사용 가능하며, 이는 의도적인 설계이다. ("" or '')

  - 다만 JS에서는 이스케이프 문자( "\\" )가 특수문자 처리에 사용되므로 HTML과 다르게 따로 설정해야 하는 부분은 있다.

  ```jsx
    function valid () {
      // 가능
      return <div>\</div>

      // 불가능
      let escape = "\";
    }
  ```

### 2.1.2 JSX 예제

---

🔖 유효 JSX 구조를 사용한 예제 알아보기

```jsx
// 기본
const ComponentA = <A>반갑다잉</A>; // or <A />

// 전개 연산자를 통한 속성 넣기
const ComponentB = <A {...attribute} />;

// 속성 및 속성값 지정
const ComponentC = <A requied={false} />;

// JSX 요소 넣기
const ComponentD = (
  <A>
    <B text="어렵다" />
  </A>
);

// {}를 통한 요소나 표현식 넣기
const ComponentE = (
  <A>
    <B children={<>어려워</>} />
  </A>
);

// 여러개의 자식 넣기
const ComponentF = (
  <A>
    흑흑
    <B text="엉엉" />
  </A>
);
```

### 2.1.3 JSX는 어떻게 자바스크립트에서 변환될까?

---

🔖 JSX 문법을 변환해주는 바벨 플러그인과 함께 알아보자

- JSX 코드 예시

  ```jsx
  const ComponentA = <A required={true}>Hi!</A>;

  const ComponentB = (
    <A>
      <B text="Hi!" />
    </A>
  );
  ```

- JS로 트랜스파일링

  ```js
  var ComponentA = React.createElement(A, { required: true }, "Hi!");

  var CoponenetB = React.createElement(A, null, React.createElement(B, { text: "Hi" }));
  ```

🫨 추가적으로 찾아본 부분

- 확실히 바벨 등의 트랜스파일러를 통해 JSX가 JS로 변환된다는 것을 알 수 있었고, 뭔가 조금 더 우리가 사용하는 코드로 예시를 보고 싶어서 찾아봤다.

- 링크 : [JSX와 Babel](https://www.daleseo.com/react-jsx/#google_vignette)

### 2.1.4 책 정리 + 주관적인 정리

---

🔖 책 정리

- JSX문법에 있으나 실제로 리액트에서 사용하지 않는 문법도 있다. (하지만 리액트에서지 다른 곳에서는 아닐 수도 있다.)
  - JSXNamespacedName
  - JSXMemberExpression
- HTML과 같은 트리 구조를 JS 내에서 표현할 수 있어 매우 유능한 문법이다.
- 하지만 기존 문법과 뒤섞여 가독성을 해칠 수도 있다.
- 적어도 JSX가 어떻게 변환되는지, 어떤 결과를 만드는지 알아두어야 한다.

<br>

🏷️ 주관적인 정리

- 평소에 JSX를 당연하게 사용만 해왔지, 이게 어떤 식으로 변환 및 재구성되어 브라우저에서 동작하는지에 대한 생각은 해보지 못했던 것 같다.
- 구현에만 급급하지 말고, 항상 효율적으로 다양한 고민을 해야 할 듯하다.. (비용, 효율성, 구조, 간결한 코드 로직 등)
