# 11μ¥: Next.js 13κ³Ό λ¦¬μ•΅νΈ 18

## 11.1 app λ””λ ‰ν„°λ¦¬μ λ“±μ¥

Next.js 13 λ²„μ „ μ΄μ „κΉμ§€ λ¨λ“  νμ΄μ§€λ” κ°κ°μ λ¬Όλ¦¬μ μΌλ΅ κµ¬λ³„λ νμΌλ΅ λ…λ¦½λΌ μμ—κ³ , νμ΄μ§€ κ³µν†µμΌλ΅ λ¬΄μ–Έκ°€λ¥Ό μ§‘μ–΄ λ„£μ„ μ μλ” κ³³μ€ \_documentμ™€ \_appμ΄ μ μΌν•λ‹¤.

- \_document: νμ΄μ§€μ—μ„ μ“°μ΄λ” `<html>`κ³Ό `<body>` νƒκ·Έλ¥Ό μμ •ν•λ” μ ν•μ μΈ μ©λ„λ΅ μ‚¬μ©λλ‹¤. μ¤μ§ μ„λ²„μ—μ„λ§ μ‘λ™ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈ λ΅μ§μ„ λ¶™μ΄λ” κ²ƒμ„ κΈμ§€ν•κ³  μλ‹¤.
- \_app: νμ΄μ§€λ¥Ό μ΄κΈ°ν™”ν•κΈ° μ„ν• μ©λ„λ΅ μ‚¬μ©λλ©°, λ‹¤μκ³Ό κ°™μ€ μ‘μ—…μ΄ κ°€λ¥ν•λ‹¤.
  - κ³µν†µ λ μ΄μ•„μ›ƒ
  - νμ΄μ§€ λ³€κ²½ μ‹ μƒνƒ μ μ§€
  - componentDidCatchλ¥Ό ν™μ©ν• μ—λ¬ ν•Έλ“¤λ§
  - νμ΄μ§€κ°„ μ¶”κ°€μ μΈ λ°μ΄ν„° μ‚½μ…
  - global CSS μ£Όμ…

13 λ²„μ „ μ΄μ „κΉμ§€ νμ΄μ§€ κ³µν†µ λ μ΄μ•„μ›ƒμ„ μ μ§€ν•  μ μλ” λ°©λ²•μ€ \_appμ΄ μ μΌν–λ‹¤.
μ΄λ” κ° νμ΄μ§€λ³„λ΅ μ„λ΅ λ‹¤λ¥Έ λ μ΄μ•„μ›ƒμ„ μ μ§€ν•  μ μ—†λ” λ‹¨μ μ΄ μƒκΈ΄λ‹¤.

### λΌμ°ν…

#### layout.js

Next.js 13λ¶€ν„°λ” app λ””λ ‰ν„°λ¦¬ λ‚΄λ¶€μ ν΄λ”λ…μ΄ λΌμ°ν…μ΄ λλ©°, μ΄ ν΄λ”μ— ν¬ν•¨λ  μ μλ” νμΌλ…μ€ λ‡ κ°€μ§€λ΅ μ ν•λΌ μλ‹¤.

layout.jsλ” μμ•½λ νμΌλ… μ¤‘ ν•λ‚λ΅ νμ΄μ§€μ κΈ°λ³Έμ μΈ λ μ΄μ•„μ›ƒμ„ κµ¬μ„±ν•λ” μ”μ†λ‹¤.

ν•΄λ‹Ή ν΄λ”μ— layoutμ΄ μλ‹¤λ©΄ κ·Έ ν•μ„ ν΄λ”μ— λ¨λ‘ μν–¥μ„ λ―ΈμΉλ‹¤.

layoutμ€ μ£Όμ†λ³„ κ³µν†µ UIλ¥Ό ν¬ν•¨ν•  μ μμ„λΏλ§ μ•„λ‹λΌ \_app, \_documentλ¥Ό λ€μ‹ ν•΄ μ›Ήνμ΄μ§€λ¥Ό μ‹μ‘ν•λ” λ° ν•„μ”ν• κ³µν†µ μ½”λ“λ¥Ό μ‚½μ…ν•  μλ„ μλ‹¤.

λ λ‹¤λ¥Έ μ¥μ μ€ `<Html>`, `<Head />`μ²λΌ Next.jsμ—μ„ μ κ³µν•λ” νƒκ·Έλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μ•„λ‹ HTMLμ—μ„ κΈ°λ³ΈμΌλ΅ μ κ³µν•λ” νƒκ·Έλ¥Ό μ‚¬μ©ν•΄ μΆ€ λ” μμ—°μ¤λ½κ² μ½”λ“λ¥Ό μ‘μ„±ν•  μ μκ² λλ‹¤.

#### page.js

pageκ°€ λ°›λ” propsλ” λ‹¤μκ³Ό κ°™λ‹¤.

- params: λ™μ  λΌμ°νΈ νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  κ²½μ° ν•΄λ‹Ή νλΌλ―Έν„°μ— κ°’μ΄ λ“¤μ–΄μ¨λ‹¤.
- searchParams: URLμ—μ„ `?a=1`κ³Ό κ°™μ€ URLSearchParamsλ¥Ό μλ―Έν•λ‹¤.
  μλ¥Ό λ“¤μ–΄ `?a=1&b=2`λ΅ μ ‘κ·Όν•  κ²½μ° searchParamsμ—λ” `{ a: "1", b: "2" }`λΌλ” JS κ°μ²΄ κ°’μ΄ μ¤κ² λλ‹¤.

#### error.js

ν•΄λ‹Ή λΌμ°ν… μμ—­μ—μ„ μ‚¬μ©λλ” κ³µν†µ μ—λ¬ μ»΄ν¬λ„νΈλ‹¤.

error νμ΄μ§€λ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ©°,
`error:Error` κ°μ²΄μ™€ μ—λ¬ λ°”μ΄λ”λ¦¬λ¥Ό μ΄κΈ°ν™”ν•  `reset: () => void`λ¥Ό propsλ΅ λ°›λ”λ‹¤.

#### not-found.js

μ„λ²„ μ»΄ν¬λ„νΈμ΄λ©°, νΉμ • λΌμ°ν… ν•μ„μ μ£Όμ†λ¥Ό μ°Ύμ„ μ μ—†λ” 404 νμ΄μ§€λ¥Ό λ λ”λ§ν•  λ• μ‚¬μ©λλ‹¤.

#### loading.js

λ¦¬μ•΅νΈ Suspenseλ¥Ό κΈ°λ°μΌλ΅ ν•΄λ‹Ή μ»΄ν¬λ„νΈκ°€ λ¶λ¬μ¤λ” μ¤‘μ„μ„ λ‚νƒ€λ‚Ό λ• μ‚¬μ©ν•  μ μλ‹¤.

#### route.js

app λ””λ ‰ν„°λ¦¬κ°€ μ •μ‹μΌλ΅ μ¶μ‹λλ©΄μ„ /pages/apiμ™€ λ™μΌν•κ² /app/api μ§€μ›λ„ μ¶”κ°€λλ‹¤.

λ””λ ‰ν„°λ¦¬κ°€ λΌμ°ν… μ£Όμ†λ¥Ό λ‹΄λ‹Ήν•λ©° νμΌλ…μ€ route.jsλ΅ ν†µμΌλλ‹¤.

```ts
import { NextRequest } from "next/server";

export async function GET(request: NextRequest) {}

export async function HEAD(request: NextRequest) {}

export async function POST(request: NextRequest) {}

export async function PUT(request: NextRequest) {}

export async function DELETE(request: NextRequest) {}

export async function PATCH(request: NextRequest) {}

export async function OPTIONS(request: NextRequest) {}
```

route.ts νμΌ λ‚΄λ¶€μ— REST APIμ λ©”μ„λ“λ…μ„ μμ•½μ–΄λ΅ μ„ μ–Έν•΄ λ‘λ©΄
HTTP μ”μ²­μ— λ§κ² ν•΄λ‹Ή λ©”μ„λ“λ¥Ό νΈμ¶ν•λ” λ°©μ‹μΌλ΅ μ‘λ™ν•λ‹¤.

μ΄ routeμ ν•¨μλ“¤μ΄ λ°›μ„ μ μλ” νλΌλ―Έν„°λ” λ‹¤μκ³Ό κ°™λ‹¤.

- request: NextRequest κ°μ²΄μ΄λ©°, fetchμ Requestλ¥Ό ν™•μ¥ν• Next.jsμ Requestμ΄λ‹¤. μ΄ κ°μ²΄μ—μ„λ” μ”μ²­κ³Ό κ΄€λ ¨λ cookie, headers λ“±λΏλ§ μ•„λ‹λΌ nextUrl κ°™μ€ μ£Όμ† κ°μ²΄λ„ ν™•μΈν•  μ μλ‹¤.
- context: paramsλ§μ„ κ°€μ§€κ³  μλ” κ°μ²΄μ΄λ©°, λ™μ  λΌμ°ν… νλΌλ―Έν„° κ°μ²΄κ°€ ν¬ν•¨λΌ μλ‹¤.

```ts
// app/api/users/[id]/route.ts

export async function GET(
  request: NextRequest,
  context: { params: { id: string } }
) {
  const response = await fetch(
    `https://jsonplaceholder/typicode.com/users/${context.params.id}`
  );

  // ...

  return new Response(JSON.stringify(result), {
    status: 200,
    headers: {
      "content-type": "application/json",
    },
  });
}
```

## 11.2 λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈ

**μ„λ²„ μ»΄ν¬λ„νΈ !== μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§**

### κΈ°μ΅΄ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈμ™€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ ν•κ³„

1. **JS λ²λ“¤ ν¬κΈ°κ°€ 0μΈ μ»΄ν¬λ„νΈλ¥Ό λ§λ“¤ μ μ—†λ‹¤.**
   λΈλΌμ°μ € ν™κ²½μ—μ„ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©μ„ ν–μ„ λ• μ΄λ” μ‚¬μ©μ κΈ°κΈ°μ λ¶€λ‹΄μ΄ λλ‹¤.
   λ§μ•½ μ»΄ν¬λ„νΈλ¥Ό μ„λ²„μ—μ„λ§ λ λ”λ§ν•κ³  ν΄λΌμ΄μ–ΈνΈλ” κ²°κ³Όλ§ λ°›λ”λ‹¤λ©΄ μ™Έλ¶€ λΌμ΄λΈλ¬λ¦¬λ¥Ό λ‹¤μ΄λ΅λ“ν•μ§€ μ•λ”λΌλ„ μ‚¬μ©μμ—κ² λ³΄μ—¬μ£Όκ³  μ‹¶μ€ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•  μ μμ„ κ²ƒμ΄λ‹¤.
2. **λ°±μ—”λ“ λ¦¬μ†μ¤μ— λ€ν• μ§μ ‘μ μΈ μ ‘κ·Όμ΄ λ¶κ°€λ¥ν•λ‹¤.**
   λ§μ•½ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ§μ ‘ μ ‘κ·Όμ΄ κ°€λ¥ν•λ‹¤λ©΄ κ±°μ³κ°€λ” λ‹¨κ³„κ°€ ν•λ‚ μ¤„ κ²ƒμ΄λ‹¤.
3. **μλ™ μ½”λ“ λ¶„ν• μ΄ λ¶κ°€λ¥ν•λ‹¤.**
   React.lazyλ΅ μ½”λ“ λ¶„ν• μ΄ κ°€λ¥ν•μ§€λ§ μ½”λ“ λ¶„ν• μ΄ μ„λ²„μ—μ„ μλ™μΌλ΅ μν–‰λλ‹¤λ©΄ λ” μΆ‹μ„ κ²ƒμ΄λ‹¤.
4. **μ—°μ‡„μ μΌλ΅ λ°μƒν•λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ”μ²­μ„ λ€μ‘ν•κΈ° μ–΄λ µλ‹¤.**
   ![alt text](image.png)
   ![alt text](image-1.png)
5. **μ¶”μƒν™”μ— λ“λ” λΉ„μ©μ΄ μ¦κ°€ν•λ‹¤.**
   μ»΄ν¬λ„νΈκ°€ μ—¬λ¬ κ°κ°€ μ¤‘μ²©λκ³  ν•©μ„±λμ–΄ λ³µμ΅ν•΄ λ³΄μΌ μ μμ§€λ§ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λλ” λ‚΄μ©μ„ κ³„μ‚°ν•΄μ„ λ‚΄λ ¤μ¤€λ‹¤λ©΄,
   ν΄λΌμ΄μ–ΈνΈμ—μ„λ” λ³µμ΅ν• μ‘μ—…μ„ ν•μ§€ μ•μ•„λ„ λκ³  μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λλ” κ²°κ³Όλ¬Ό λν• κ°€λ²Όμ›μ§ κ²ƒμ΄λ‹¤.
   μ½”λ“ μ¶”μƒν™”μ— λ”°λ¥Έ λΉ„μ©μ€ μ„λ²„μ—μ„λ§ μ§€λ¶ν•λ©΄ λλ‹¤.

κ²°κµ­ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ€ μ •μ  μ½ν…μΈ λ¥Ό λΉ λ¥΄κ² μ κ³µν•κ³ , μ„λ²„μ— μλ” λ°μ΄ν„°λ¥Ό μ†μ‰½κ² μ κ³µν•  μ μλ” λ°λ©΄ μ‚¬μ©μμ μΈν„°λ™μ…μ— λ”°λ¥Έ λ‹¤μ–‘ν• μ‚¬μ©μ κ²½ν—μ„ μ κ³µν•κΈ΄ μ–΄λ µλ‹¤.

ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ λ”λ§μ€ μ‚¬μ©μμ μΈν„°λ™μ…μ— λ”°λΌ λ‹¤μ–‘ν• κ²ƒμ„ μ κ³µν•  μ μμ§€λ§ μ„λ²„μ— λΉ„ν•΄ λλ¦¬κ³  λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” κ²ƒλ„ μ–΄λ µλ‹¤.

λ‘ κµ¬μ΅°μ μ¥μ μ„ λ¨λ‘ μ·¨ν•κ³ μ ν•λ” κ²ƒμ΄ λ°”λ΅ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈλ‹¤.

### μ„λ²„ μ»΄ν¬λ„νΈλ€?

μ„λ²„ μ»΄ν¬λ„νΈλ€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘μ—μ„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•  μ μλ” κΈ°λ²•μ„ μλ―Έν•λ‹¤.
μ¦‰, μΌλ¶€ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ—μ„, μΌλ¶€ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„ λ λ”λ§λλ‹¤.

π›‘ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό importν•  μ μ—†λ‹¤.
ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ‹¤ν–‰ν•  λ°©λ²•μ΄ μ—†κΈ° λ•λ¬Έμ— μ»΄ν¬λ„νΈλ¥Ό νΈμ¶ν•  μ μ—†λ‹¤.

κ°κ°μ μ»΄ν¬λ„νΈμ μ°¨μ΄μ™€ μ μ•½μ‚¬ν•­μ— λ€ν•΄ μ•μ•„λ³΄μ.

- μ„λ²„ μ»΄ν¬λ„νΈ

  - μ”μ²­μ΄ μ¤λ©΄ μ„λ²„μ—μ„ λ”± ν• λ² μ‹¤ν–‰λλ―€λ΅ μƒνƒλ¥Ό κ°€μ§ μ μ—†λ‹¤. (β: useState, useReducer)
  - ν• λ² λ λ”λ§λλ©΄ λμ΄κΈ° λ•λ¬Έμ— λ λ”λ§ μƒλ…μ£ΌκΈ°λ„ μ‚¬μ©ν•  μ μ—†λ‹¤. (β: useEffect, useLayoutEffect)
  - μ„λ²„μ—μ„λ§ μ‹¤ν–‰λκΈ° λ•λ¬Έμ— DOM API, window, document λ“±μ— μ ‘κ·Όν•  μ μ—†λ‹¤.
  - μ„λ²„μ—λ§ μλ” λ°μ΄ν„°λ¥Ό async/awaitμΌλ΅ μ ‘κ·Όν•  μ μλ‹¤.

- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ
  - μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ¬ μ μ—†λ‹¤.
  - ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό κ°–λ” κµ¬μ΅°λ” κ°€λ¥ν•λ‹¤.

### μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§κ³Ό μ„λ²„ μ»΄ν¬λ„νΈμ μ°¨μ΄

#### μ„λ²„ μ»΄ν¬λ„νΈ

μ„λ²„μ—μ„λ§ λ λ”λ§λκ³  ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λμ§€ μ•λ” μ»΄ν¬λ„νΈ
(μ„λ²„μ—μ„ μ²λ¦¬λ κ²°κ³Όλ§ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅)

μ΄λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ JS λ²λ“¤ ν¬κΈ°λ¥Ό μ¤„μ΄λ” λ° κΈ°μ—¬ν•κ³  λ΅λ”© μ‹κ°„μ„ λ‹¨μ¶•μ‹ν‚¨λ‹¤.

#### μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§

ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅λκΈ° μ „μ— μ„λ²„μ—μ„ HTMLμ„ μƒμ„±ν•λ” κΈ°μ 

μ΄κΈ° νμ΄μ§€ λ΅λ”© μ‹κ°„μ„ λ‹¨μ¶•μ‹ν‚¤κ³ , SEOμ— μ λ¦¬ν•λ‹¤.

#### μ°¨μ΄μ 

μ„λ²„ μ»΄ν¬λ„νΈλ” JS λ²λ“¤ ν¬κΈ°λ¥Ό μ¤„μ΄λ” λ° μ¤‘μ μ„ λ‘κ³  μκ³ ,
SSRμ€ μ΄κΈ° λ΅λ”© μ‹κ°„ λ‹¨μ¶•κ³Ό SEO μµμ ν™”μ— μ΄μ μ„ λ§μ¶”κ³  μλ‹¤.

λν• μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„ μ‹¤ν–‰λλ―€λ΅ λ°μ΄ν„° fetchingκ³Ό κ°™μ€ μ„λ²„ μ‚¬μ΄λ“ λ΅μ§μ„ μ²λ¦¬ν•λ”λ° μ μ©ν•λ©°, SSRμ€ ν΄λΌμ΄μ–ΈνΈμ—κ² λΉ λ¥΄κ² μ»¨ν…μΈ λ¥Ό μ κ³µν•λ”λ° μ λ¦¬ν•λ‹¤.

κ²°λ΅ μ μΌλ΅ λ‘μ€ λ€μ²΄μ κ°€ μ•„λ‹ μƒνΈλ³΄μ™„ν•λ” κ°λ…μ΄λ‹¤.

### μ„λ²„ μ»΄ν¬λ„νΈλ” μ–΄λ–»κ² μ‘λ™ν•λ”κ°€?

1. μ„λ²„κ°€ λ λ”λ§ μ”μ²­μ„ λ°›λ”λ‹¤.
   μ„λ²„κ°€ λ λ”λ§ κ³Όμ •μ„ μν–‰ν•΄μ•Ό ν•λ―€λ΅ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©ν•λ” λ¨λ“  νμ΄μ§€λ” ν•­μƒ μ„λ²„μ—μ„ μ‹μ‘λλ‹¤.
2. μ„λ²„λ” λ°›μ€ μ”μ²­μ— λ”°λΌ μ»΄ν¬λ„νΈλ¥Ό JSONμΌλ΅ μ§λ ¬ν™”ν•λ‹¤.
   μ΄λ• μ„λ²„μ—μ„ λ λ”λ§ν•  μ μλ” κ²ƒμ€ μ§λ ¬ν™”ν•΄μ„ λ‚΄λ³΄λ‚΄κ³ , ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” ν”λ μ΄μ¤ν™€λ” ν•μ‹μΌλ΅ λΉ„μ›λ‘κ³  λ‚νƒ€λ‚Έλ‹¤.
3. λΈλΌμ°μ €κ°€ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬λ¥Ό κµ¬μ„±ν•λ‹¤.
   ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ ν”λ μ΄μ¤ν™€λ”λ¥Ό λ§λ‚λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§μ„ μ§„ν–‰ν•  κ²ƒμ΄κ³ , μ„λ²„μ—μ„ λ§λ“¤μ–΄μ§„ κ²°κ³Όλ¬Όμ„ λ°›μ•λ‹¤λ©΄ μ΄ μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅ λ¦¬μ•΅νΈ νΈλ¦¬λ¥Ό λ§λ“¤ κ²ƒμ΄λ‹¤.
   μµμΆ…μ μΌλ΅ μ΄ νΈλ¦¬λ¥Ό λ λ”λ§ν•΄ λΈλΌμ°μ €μ DOMμ— μ»¤λ°‹ν•λ‹¤.

μ§€κΈκΉμ§€ μ‚΄ν΄λ³Έ λ°”λ¥Ό ν† λ€λ΅ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈμ μ‘λ™ λ°©μ‹μ νΉλ³„ν• μ μ„ μ‚΄ν΄λ³΄μ.

1. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ •λ³΄λ¥Ό λ³΄λ‚Ό λ• μ¤νΈλ¦¬λ° ν•νƒλ΅ λ³΄λƒ„μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈκ°€ μ¤„ λ‹¨μ„λ΅ JSONμ„ μ½κ³  μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•μ—¬ μ‚¬μ©μμ—κ² λΉ λ¥΄κ² κ²°κ³Όλ¬Όμ„ λ³΄μ—¬μ¤„ μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.
2. μ»΄ν¬λ„νΈλ“¤μ΄ ν•λ‚μ λ²λ“¤λ¬ μ‘μ—…μ— ν¬ν•¨λΌ μμ§€ μ•κ³ , κ° μ»΄ν¬λ„νΈλ³„λ΅ λ²λ“¤λ§μ΄ λ³„κ°λ΅ λΌ μμ–΄ ν•„μ”μ— λ”°λΌ μ»΄ν¬λ„νΈλ¥Ό μ§€μ—°ν•΄μ„ λ°›κ±°λ‚ λ”°λ΅ λ°›λ” λ“±μ μ‘μ—…μ΄ κ°€λ¥ν•΄μ΅λ‹¤.
3. SSRκ³Όλ” λ‹¤λ¥΄κ² κ²°κ³Όλ¬Όμ΄ HTMLμ΄ μ•„λ‹ JSON ν•νƒλ΅ λ³΄λ‚΄μ§„λ‹¤.
   HTML λ€μ‹  λ‹¨μν• λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ κµ¬μ΅°λ¥Ό JSONμΌλ΅ λ°›μ•„μ„ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬μ κµ¬μ„±μ„ μµλ€ν• λΉ λ¥΄κ² ν•  μ μλ„λ΅ λ„μ™€μ¤€λ‹¤.

## 11.3 Next.jsμ—μ„μ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈ

### μƒλ΅μ΄ fetch λ„μ…κ³Ό getServerSideProps, getStaticProps, getInitialPropsμ μ‚­μ 

μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§κ³Ό μ •μ  νμ΄μ§€ μ κ³µμ„ μ„ν•΄ μ΄μ©λλ getServerSideProps, getStaticProps, getInitialPropsκ°€ /app λ””λ ‰ν„°λ¦¬ λ‚΄λ¶€μ—μ„λ” μ‚­μ λλ‹¤.
κ·Έ λ€μ‹  λ¨λ“  λ°μ΄ν„° μ”μ²­μ€ μ›Ήμ—μ„ μ κ³µν•λ” ν‘μ¤€ APIμΈ fetchλ¥Ό κΈ°λ°μΌλ΅ μ΄λ¤„μ§„λ‹¤.

μ„λ²„ μ»΄ν¬λ„νΈλ” λ°μ΄ν„°κ°€ λ¶λ¬μ¤κΈ° μ „κΉμ§€ κΈ°λ‹¤λ Έλ‹¤κ°€ λ°μ΄ν„°κ°€ λ¶λ¬μ™€μ§€λ©΄ λΉ„λ΅μ† νμ΄μ§€κ°€ λ λ”λ§λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λ  κ²ƒμ΄λ‹¤.

### μ •μ  λ λ”λ§κ³Ό λ™μ  λ λ”λ§

Next.js 13μ—μ„λ” μ •μ μΈ λΌμ°ν…μ— λ€ν•΄μ„ λΉλ“ νƒ€μ„μ— λ λ”λ§μ„ λ―Έλ¦¬ ν•΄λ‘κ³ , λ™μ μΈ λΌμ°ν…μ— λ€ν•΄μ„λ” μ„λ²„μ— λ§¤λ² μ”μ²­μ΄ μ¬ λ•λ§λ‹¤ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•λ„λ΅ ν•μ€λ‹¤.

#### SSG

`fetch(URL, { cache: "force-cache" })` (κΈ°λ³Έκ°’)

λ™μ μΈ μ£Όμ†μ— λ€ν•΄ μΊμ‹±ν•κ³  μ‹¶μ€ κ²½μ°, μ¦‰ getStaticPathsλ¥Ό ν‰λ‚΄ λ‚΄κ³  μ‹¶λ‹¤λ©΄ `generateStaticParams`λ¥Ό μ‚¬μ©ν•λ‹¤.

```ts
export async function generateStaticParams() {
  return [{ id: "1" }, { id: "2" }, { id: "3" }, { id: "4" }];
}

async function fetchData(params: { id: string }) {
  const res = await fetch(`.../${params.id}`);
  const data = await res.json();
  return data;
}
```

#### SSR

`fetch(URL, { cache: "no-store" })`, `fetch(URL, { next: {revalidate: 0} })`

λ§¤λ² μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¨λ‹¤.

#### ISR

`fetch(URL, { next: { revalidate: 10 }})`

μ •ν•΄μ§„ μ ν¨μ‹κ°„ λ™μ• μΊμ‹±ν•κ³ , μ§€λ‚λ©΄ μΊμ‹λ¥Ό νκΈ°ν•λ‹¤.

### μ¤νΈλ¦¬λ°μ„ ν™μ©ν• μ μ§„μ μΈ νμ΄μ§€ λ¶λ¬μ¤κΈ°

SSRμ€ μ”μ²­λ°›μ€ νμ΄μ§€λ¥Ό λ¨λ‘ λ λ”λ§ν•΄μ„ λ‚΄λ ¤μ¤„ λ•κΉμ§€λ” μ‚¬μ©μμ—κ² μ•„λ¬΄κ²ƒλ„ λ³΄μ—¬μ¤„ μ μ—†λ‹¤.
κ·Έλ¦¬κ³  λ‹¤ λ°›μ•λ‹¤ ν•λ”λΌλ„ μ‚¬μ©μκ°€ μΈν„°λ™μ…ν•  μ μ—†λ” μ •μ μΈ νμ΄μ§€μ΄κ³ , λ¦¬μ•΅νΈμ—μ„ ν•μ΄λ“λ μ΄μ… κ³Όμ •μ„ κ±°μ³μ•Όλ§ λΉ„λ΅μ† μ‚¬μ©μκ°€ μ‚¬μ©ν•  μ μλ” νμ΄μ§€κ°€ λλ‹¤.

λ¬Έμ λ” μ΄ λ¨λ“  μ‘μ—…μ΄ μμ°¨μ μΌλ΅ λ‹¤ μ™„λ£λΌμ•Όλ§ νμ΄μ§€ ν•λ‚λ¥Ό μ¨μ „ν•κ² λ³Ό μ μλ‹¤λ” κ²ƒμ΄λ‹¤.

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ HTMLμ„ μ‘μ€ λ‹¨μ„λ΅ μΌκ°μ„ μ™„μ„±λλ” λ€λ΅ ν΄λΌμ΄μ–ΈνΈλ΅ μ μ§„μ μΌλ΅ λ³΄λ‚΄λ” μ¤νΈλ¦¬λ°μ΄ λ„μ…λλ‹¤.
μ΄λ¥Ό ν†µν•΄ λ¨Όμ € λ°μ΄ν„°κ°€ λ΅λ“λλ” μ»΄ν¬λ„νΈλ¥Ό λΉ λ¥΄κ² λ³΄μ—¬μ£Όλ” λ°©λ²•μ΄ κ°€λ¥ν•λ‹¤.

Suspenseλ¥Ό ν†µν•΄ μ¤νΈλ¦¬λ°μ„ ν™μ©ν•  μ μλ‹¤.

- loading.tsx λ°°μΉ: μ „μ²΄ pageμ— λ€ν•΄ Loading μ»΄ν¬λ„νΈλ¥Ό λ³΄μ—¬μ¤€λ‹¤.

```jsx
<Suspense fallback={<Loading />}>
  <Page />
</Suspense>
```

- Suspense λ°°μΉ: μ„Έλ¶„ν™”λ μ μ–΄λ¥Ό ν•  λ• μ§μ ‘ Suspenseλ¥Ό λ°°μΉν•  μ μλ‹¤.

---

### μƒλ΅ μ•κ²λ κ°λ…

- route.ts
- μ„λ²„ μ»΄ν¬λ„νΈμ™€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ μ°¨μ΄μ 
- μ„λ²„ μ»΄ν¬λ„νΈμ μ‘λ™ λ°©μ‹
- app λΌμ°ν„°μ SSG, SSR, ISR
- μ¤νΈλ¦¬λ° κ°λ…

### μ½μΌλ©΄μ„ μ–΄λ ¤μ› κ±°λ‚ μ΄ν•΄κ°€ μ μ•λλ λ¶€λ¶„

- μ„λ²„ μ»΄ν¬λ„νΈμ λ‚΄λ¶€ λ™μ‘ λ°©μ‹μ΄ μ–΄λ ¤μ› μµλ‹λ‹¤.
