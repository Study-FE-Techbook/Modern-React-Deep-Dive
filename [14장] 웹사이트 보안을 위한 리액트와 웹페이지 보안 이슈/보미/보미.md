# [14ì¥] ì›¹ì‚¬ì´íŠ¸ ë³´ì•ˆì„ ìœ„í•œ ë¦¬ì•¡íŠ¸ì™€ ì›¹í˜ì´ì§€ ë³´ì•ˆ ì´ìŠˆ

ì½”ë“œì˜ ê·œëª¨ ì¦ê°€ = ë³´ì•ˆ ì·¨ì•½ì  ë…¸ì¶œ í™•ë¥  ì¦ê°€

## 14.1 ë¦¬ì•¡íŠ¸ì—ì„œ ë°œìƒí•˜ëŠ” í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ…(XSS)

- ì›¹ì‚¬ì´íŠ¸ ê°œë°œìê°€ ì•„ë‹Œ ì œ3ìê°€ ì›¹ì‚¬ì´íŠ¸ì— ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•´ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì·¨ì•½ì 

**âœ¨dangerouslySetInnerHTML prop**

- íŠ¹ì • ë¸Œë¼ìš°ì € DOMì˜ innerHTMLì„ íŠ¹ì •í•œ ë‚´ìš©ìœ¼ë¡œ êµì²´í•  ìˆ˜ ìˆëŠ” ë°©ë²•

```jsx
const htmlContent = `<p>ì•…</p>`
const MyComponent = ({ htmlContent }) => {
  return <div dangerouslySetInnerHTML={{ __html: htmlContent }} />
}

export default MyComponent
```

- ì˜¤ì§ `__html` ì„ í‚¤ë¡œ ê°€ì§€ê³  ìˆëŠ” ê°œì²´ë§Œ ì¸ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆê³ , ì´ ì¸ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ ë¬¸ìì—´ì„ DOMì— ê·¸ëŒ€ë¡œ í‘œì‹œí•˜ëŠ” ì—­í• ì„ í•œë‹¤.
- ì¸ìˆ˜ë¡œ ë°›ëŠ” ë¬¸ìì—´ì—ëŠ” ì œí•œì´ ì—†ì–´ ìœ„í—˜í•˜ë‹¤.
- ë¬¸ìì—´ ê°’ì€ í•œ ë²ˆ ë” ê²€ì¦ì´ í•„ìš”í•˜ë‹¤.

**âœ¨useRefë¥¼ í™œìš©í•œ ì§ì ‘ ì‚½ì…**

- DOMì— ì§ì ‘ ë‚´ìš©ì„ ì‚½ì…í•  ìˆ˜ ìˆëŠ” ë°©ë²•
- innerHTMLì— ë³´ì•ˆ ì·¨ì•½ì ì´ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ë©´ ìœ„ì™€ ë™ì¼í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

```jsx
import React, { useRef, useEffect } from 'react'

const MyComponent = ({ htmlContent }) => {
  const divRef = useRef(null)

  useEffect(() => {
    if (divRef.current) {
      divRef.current.innerHTML = htmlContent
    }
  }, [htmlContent])

  return <div ref={divRef}></div>
}

export default MyComponent
```

**âœ¨ë¦¬ì•¡íŠ¸ì—ì„œ XSS ë¬¸ì œë¥¼ í”¼í•˜ëŠ” ë°©ë²•**

- ì œ3ìê°€ ì‚½ì…í•  ìˆ˜ ìˆëŠ” HTMLì„ ì•ˆì „í•œ HTML ì½”ë“œë¡œ í•œ ë²ˆ ì¹˜í™˜í•˜ëŠ” ê²ƒ (=ìƒˆë‹ˆíƒ€ì´ì¦ˆ or ì´ìŠ¤ì¼€ì´í”„)

```jsx
const MyComponent = ({ htmlContent }) => {
  const divRef = useRef(null)

  useEffect(() => {
    if (divRef.current) {
      const cleanHtml = sanitizeHtml(htmlContent, {
        allowedTags: ['b', 'i', 'em', 'strong', 'a'], // í—ˆìš©í•  íƒœê·¸ë¥¼ ëª…ì‹œ
        allowedAttributes: {
          a: ['href'],
        },
        // ìŠ¤íƒ€ì¼ ì†ì„±ì„ ì œê±°
        allowedStyles: {},
        // ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ë¥¼ ì œê±°
        disallowedTagsMode: 'discard',
      })
      divRef.current.innerHTML = cleanHtml
    }
  }, [htmlContent])

  return <div ref={divRef}></div>
}

export default MyComponent
```

## 14.2 getServerSidePropsì™€ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ì£¼ì˜í•˜ì

- ì„œë²„ì—ëŠ” ì¼ë°˜ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ë©´ ì•ˆ ë˜ëŠ” ì •ë³´ë“¤ì´ ë‹´ê²¨ ìˆê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸, ì¦‰ ë¸Œë¼ìš°ì €ì— ì •ë³´ë¥¼ ë‚´ë ¤ì¤„ ë•ŒëŠ” ì¡°ì‹¬í•´ì•¼ í•œë‹¤.
- getServerSidePropsê°€ ë°˜í™˜í•˜ëŠ” propsê°’ì€ ëª¨ë‘ ì‚¬ìš©ìì˜ HTMLì— ê¸°ë¡ë˜ê³ , ì „ì—­ ë³€ìˆ˜ë¡œ ë“±ë¡ë˜ì–´ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¶©ë¶„íˆ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë³´ì•ˆ ìœ„í˜‘ì— ë…¸ì¶œë˜ëŠ” ê°’ì´ ëœë‹¤. (API í‚¤, ì‚¬ìš©ì ì„¸ì…˜ ì •ë³´, ë¯¼ê°í•œ ì„¤ì • ê°’ ë“±)
- ì¶©ë¶„íˆ getServerSidePropsì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤í–‰ë˜ì–´ ì„±ëŠ¥ ì¸¡ë©´ì—ì„œë„ ì†í•´ë¥¼ ë³¸ë‹¤. â†’ getServerSidePropsê°€ ë°˜í™˜í•˜ëŠ” ê°’ ë˜ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ë°˜í™˜í•˜ëŠ” propsëŠ” ë°˜ë“œì‹œ í•„ìš”í•œ ê°’ìœ¼ë¡œë§Œ ì² ì €í•˜ê²Œ ì œí•œë˜ì–´ì•¼ í•œë‹¤.

```jsx
export async function getServerSideProps(context) {
  // ë¯¼ê°í•œ ë°ì´í„°ëŠ” ì„œë²„ì—ì„œë§Œ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
  const data = await fetchDataFromServer()
  const safeData = {
    id: data.id,
    name: data.name,
    // í´ë¼ì´ì–¸íŠ¸ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ë°ì´í„°ë§Œ í¬í•¨í•œë‹¤.
  }

  return {
    props: { safeData },
  }
}

function Page({ safeData }) {
  return (
    <div>
      <h1>{safeData.name}</h1>
      {/* ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë˜ì§€ ì•Šì€ ì•ˆì „í•œ ë°ì´í„°ë¥¼ ë Œë”ë§ */}
    </div>
  )
}

export default Page
```

## 14.3 `<a>` íƒœê·¸ì˜ ê°’ì— ì ì ˆí•œ ì œí•œì„ ë‘¬ì•¼ í•œë‹¤

- `<a>` íƒœê·¸ëŠ” ë°˜ë“œì‹œ í˜ì´ì§€ ì´ë™ì´ ìˆì„ ë•Œë§Œ ì‚¬ìš©í•˜ì.
- í˜ì´ì§€ ì´ë™ì´ ì—†ì–´ ì–´ë– í•œ í•¸ë“¤ëŸ¬ë§Œ ì‘ë™ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ buttonì„ ì‚¬ìš©í•˜ì.
- hrefì— ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì£¼ì†Œë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤ë©´ ì´ ë˜í•œ ë³´ì•ˆ ì´ìŠˆë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤. â†’ href ê°’ ì œí•œí•˜ê¸°
- í”¼ì‹± ì‚¬ì´íŠ¸ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ originë„ í™•ì¸í•´ ì²˜ë¦¬í•˜ì.

## 14.4 HTTP ë³´ì•ˆ í—¤ë” ì„¤ì •í•˜ê¸°

**âœ¨Strict-Transport-Security**

- HTTPì˜ **Strict-Transport-Security** ì‘ë‹µ í—¤ë”ëŠ” ëª¨ë“  ì‚¬ì´íŠ¸ê°€ HTTPSë¥¼ í†µí•´ ì ‘ê·¼í•´ì•¼ í•˜ë©°, ë§Œì•½ HTTPë¡œ ì ‘ê·¼í•˜ëŠ” ê²½ìš° ëª¨ë“  ì‹œë„ëŠ” HTTPSë¡œ ë³€ê²½ë˜ê²Œ í•œë‹¤.

**âœ¨X-XSS-Protection**

- ë¹„í‘œì¤€ ê¸°ìˆ , í˜„ì¬ ì‚¬íŒŒë¦¬ì™€ êµ¬í˜• ë¸Œë¼ìš°ì €ì— ì œê³µë˜ëŠ” ê¸°ëŠ¥
  - `0`: XSS í•„í„° ë¹„í™œì„±í™”
  - `1`: XSS í•„í„° í™œì„±í™”í•˜ê³ , ê³µê²©ì´ íƒì§€ë˜ë©´ í˜ì´ì§€ ë¡œë“œë¥¼ ì°¨ë‹¨
  - `1; mode=block`: XSS í•„í„°ë¥¼ í™œì„±í™”í•˜ê³ , ê³µê²©ì´ íƒì§€ë˜ë©´ í˜ì´ì§€ ë¡œë“œë¥¼ ì°¨ë‹¨
  - `1; report=<reporting-URI>`: XSS í•„í„°ë¥¼ í™œì„±í™”í•˜ê³ , ê³µê²©ì´ íƒì§€ë˜ë©´ í˜ì´ì§€ ë¡œë“œë¥¼ ì°¨ë‹¨í•˜ë©°, ì§€ì •ëœ URIë¡œ ë³´ê³ í•¨.

**âœ¨X-Frame-Options**

- í˜ì´ì§€ë¥¼ frame, iframe, embed, object ë‚´ë¶€ì—ì„œ ë Œë”ë§ì„ í—ˆìš©í• ì§€ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.
- **DENY**: ëª¨ë“  ë„ë©”ì¸ì—ì„œ í•´ë‹¹ í˜ì´ì§€ë¥¼ í”„ë ˆì„ ë‚´ì— ë Œë”ë§í•˜ëŠ” ê²ƒì„ ê¸ˆì§€
  ```
  X-Frame-Options: DENY
  ```
- **SAMEORIGIN**: ë™ì¼í•œ ì¶œì²˜ì—ì„œë§Œ í•´ë‹¹ í˜ì´ì§€ë¥¼ í”„ë ˆì„ ë‚´ì— ë Œë”ë§í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©
  ```
  X-Frame-Options: SAMEORIGIN
  ```
- **ALLOW-FROM uri**: íŠ¹ì • ì¶œì²˜(uri)ì—ì„œë§Œ í•´ë‹¹ í˜ì´ì§€ë¥¼ í”„ë ˆì„ ë‚´ì— ë Œë”ë§í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•œë‹¤. ì´ ì˜µì…˜ì€ ìµœì‹  ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìœ¼ë¯€ë¡œ, ì‚¬ìš© ì‹œ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.
  ```
  X-Frame-Options: ALLOW-FROM https://example.com/
  ```

**âœ¨Permissions-Policy**

- ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ê³¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê¸°ëŠ¥ì„ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” í—¤ë”

[XSSë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œ í—¤ë”]

```jsx
server {
    ...
    # ëª¨ë“  ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ ë§‰ê¸°
    # geolocation ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•˜ì—¬, í˜ì´ì§€ê°€ ìœ„ì¹˜ ì •ë³´ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•¨
    add_header Permissions-Policy "geolocation=()";

    # ìœ„ì¹˜ ì •ë³´ëŠ” í˜ì´ì§€ ìì‹ ê³¼ íŠ¹ì • í˜ì´ì§€ì— ëŒ€í•´ì„œë§Œ í—ˆìš©
    # ì¹´ë©”ë¼ëŠ” ëª¨ë“  ì¶œì²˜ì—ì„œ í—ˆìš©
    # í™”ë©´ ì „ì²´ ëª¨ë“œ(PIP)ë¥¼ ë¹„í™œì„±í™”
    # - geolocation: í˜„ì¬ ë„ë©”ì¸ê³¼ example.comì—ì„œë§Œ ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ í—ˆìš©
    # - camera: ëª¨ë“  ì¶œì²˜ì—ì„œ ì¹´ë©”ë¼ ì ‘ê·¼ í—ˆìš©
    # - fullscreen: í™”ë©´ ì „ì²´ ëª¨ë“œ ë¹„í™œì„±í™”
    add_header Permissions-Policy "geolocation=(self https://example.com), camera=(*), fullscreen=()";

    ...
}

```

**âœ¨X-Content-Type-Options**

> â“MIME(Multipurpose Internet Mail Extensions) <br>
> ë©”ì‹œì§€ì˜ ì½˜í…ì¸ ê°€ ì–´ë–¤ í˜•ì‹ì¸ì§€ ë¸Œë¼ìš°ì €ì™€ ì„œë²„ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ë©”íƒ€ë°ì´í„°<br>
> MIME í—¤ë”ëŠ” ì´ë©”ì¼ ë©”ì‹œì§€ë‚˜ HTTP ì‘ë‹µì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì •ì˜í•œë‹¤.<br> > `Content-Type`, `Content-Disposition`, `Content-Encoding` ë“±

**âœ¨Referrer-Policy**

- ì›¹ì‚¬ì´íŠ¸ê°€ ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, ë¦¬í¼ëŸ¬(ì¦‰, í˜„ì¬ í˜ì´ì§€ì˜ URL ì •ë³´)ë¥¼ ì–´ë–»ê²Œ ì „ì†¡í• ì§€ë¥¼ ì œì–´í•˜ëŠ” ë³´ì•ˆ ê¸°ëŠ¥
- ì´ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ì´íŠ¸ê°€ ìì‹ ì˜ URL ì •ë³´ë¥¼ ì–¼ë§ˆë‚˜ ê³µê°œí• ì§€ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ì‚¬ìš©ì ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ê³  ë³´ì•ˆ ìœ„í—˜ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
  - scheme: HTTPS í”„ë¡œí† ì½œ
  - hostname: [yceffort.kr](http://yceffort.kr)ì´ë¼ëŠ” í˜¸ìŠ¤íŠ¸ëª… ì˜ë¯¸
  - port: 443

| Origin A                      | Origin B                    | "Same-origin" ë˜ëŠ” "cross-origin"                     |
| ----------------------------- | --------------------------- | ----------------------------------------------------- |
| https://www.example.com:443   | https://www.evil.com:443    | êµì°¨ ì¶œì²˜ (Cross-origin): ë„ë©”ì¸ì´ ë‹¤ë¦„               |
| https://example.com:443       | https://www.example.com:443 | êµì°¨ ì¶œì²˜ (Cross-origin): ì„œë¸Œë„ë©”ì¸ì´ ë‹¤ë¦„           |
| https://login.example.com:443 | https://www.example.com:443 | êµì°¨ ì¶œì²˜ (Cross-origin): ì„œë¸Œë„ë©”ì¸ì´ ë‹¤ë¦„           |
| http://www.example.com:443    | https://www.example.com:443 | êµì°¨ ì¶œì²˜ (Cross-origin): ìŠ¤í‚´(HTTPì™€ HTTPS)ì´ ë‹¤ë¦„   |
| https://www.example.com:443   | https://www.example.com:80  | êµì°¨ ì¶œì²˜ (Cross-origin): í¬íŠ¸ ë²ˆí˜¸ê°€ ë‹¤ë¦„            |
| https://www.example.com:443   | https://www.example.com:443 | ë™ì¼ ì¶œì²˜ (Same-origin): ì •í™•íˆ ì¼ì¹˜                  |
| https://www.example.com       | https://www.example.com     | ë™ì¼ ì¶œì²˜ (Same-origin): ì•”ì‹œì  í¬íŠ¸ ë²ˆí˜¸(443)ì™€ ì¼ì¹˜ |

**âœ¨Content-Security-Policy**

- ì½˜í…íŠ¸ ë³´ì•ˆ ì •ì±…ì€ XSS ê³µê²©ì´ë‚˜ ë°ì´í„° ì‚½ì… ê³µê²©ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ë³´ì•ˆ ìœ„í˜‘ì„ ë§‰ê¸° ìœ„í•´ ì„¤ê³„ëë‹¤.

**ğŸ“\*-src**

CSPì—ì„œ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë¦¬ì†ŒìŠ¤ ì¶œì²˜ë¥¼ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

```
Content-Security-Policy: connect-src 'self';
                         font-src 'self';
                         frame-src 'self';
                         img-src 'self';
                         manifest-src 'self';
                         media-src 'self';
                         object-src 'self';
                         script-src https://example.com;
                         style-src 'self';
                         worker-src 'self'
```

**ğŸ“form-action**

í¼ ì–‘ì‹ìœ¼ë¡œ ì œì¶œí•  ìˆ˜ ìˆëŠ” URLì„ ì œí•œí•  ìˆ˜ ìˆë‹¤.

```jsx
Content-Security-Policy: form-action 'self' https://forms.example.com
```

```jsx
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Action Example</title>
</head>
<body>
    <h1>Submit Form</h1>
    // ì´ í¼ì€ ìê¸° ë„ë©”ì¸ê³¼ https://forms.example.comìœ¼ë¡œ ë°ì´í„°ë¥¼ ì œì¶œí•  ìˆ˜ ìˆë‹¤.
    <form action="https://forms.example.com/submit" method="post">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br><br>
        <button type="submit">Submit</button>
    </form>
</body>
</html>

```

**âœ¨ë³´ì•ˆ í—¤ë” ì„¤ì •í•˜ê¸°**

**ğŸ“Next.js**
Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë³´ì•ˆ í—¤ë”ë¥¼ ì„¤ì •í•˜ëŠ” ë° `next.config.js` íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤. ì´ íŒŒì¼ì—ì„œ `headers` í•¨ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ HTTP ì‘ë‹µ í—¤ë”ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
// next.config.js
module.exports = {
  async headers() {
    return [
      {
        // ì ìš©í•  ê²½ë¡œ
        source: '/(.*)', // ëª¨ë“  ê²½ë¡œì— ì ìš©
        headers: [
          {
            key: 'Content-Security-Policy',
            value:
              "default-src 'self'; script-src 'self' https://trusted.cdn.com; style-src 'self' 'unsafe-inline';",
          },
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block',
          },
          {
            key: 'Referrer-Policy',
            value: 'no-referrer',
          },
          {
            key: 'Permissions-Policy',
            value: 'geolocation=(self), camera=(self)',
          },
        ],
      },
    ]
  },
}
```

- **Content-Security-Policy (CSP)**: XSS ë° ë°ì´í„° ì‚½ì… ê³µê²© ë°©ì§€.
- **Strict-Transport-Security**: HTTPSë¥¼ ê°•ì œ.
- **X-Content-Type-Options**: MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ ë°©ì§€.
- **X-Frame-Options**: í´ë¦­ì¬í‚¹ ë°©ì§€.
- **X-XSS-Protection**: XSS ê³µê²© ë°©ì§€.
- **Referrer-Policy**: ì°¸ì¡°ì ì •ë³´ ì œì–´.
- **Permissions-Policy**: ì›¹ API ì ‘ê·¼ ì œì–´.

**ğŸ“NGINX**
ì„œë²„ ë¸”ë¡(server block) ë˜ëŠ” ìœ„ì¹˜ ë¸”ë¡(location block)ì—ì„œ `add_header` ì§€ì‹œì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆ í—¤ë”ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
server {
    listen 80;
    server_name example.com;

    # HTTPë¥¼ HTTPSë¡œ ë¦¬ë””ë ‰ì…˜
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name example.com;

    # SSL ì¸ì¦ì„œ ì„¤ì •
    ssl_certificate /etc/nginx/ssl/example.com.crt;
    ssl_certificate_key /etc/nginx/ssl/example.com.key;

    # ë³´ì•ˆ í—¤ë” ì„¤ì •
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' https://trusted.cdn.com; style-src 'self' 'unsafe-inline';";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";
    add_header X-Content-Type-Options "nosniff";
    add_header X-Frame-Options "DENY";
    add_header X-XSS-Protection "1; mode=block";
    add_header Referrer-Policy "no-referrer";
    add_header Permissions-Policy "geolocation=(self), camera=(self)";

    location / {
        # ê¸°ë³¸ ì„¤ì •
        try_files $uri $uri/ =404;
    }
}
```

**âœ¨ë³´ì•ˆ í—¤ë” í™•ì¸í•˜ê¸°**

[Analyse your HTTP response headers](https://securityheaders.com/)

## 14.5 ì·¨ì•½ì ì´ ìˆëŠ” íŒ¨í‚¤ì§€ì˜ ì‚¬ìš©ì„ í”¼í•˜ì

[Snyk Vulnerability Database | Snyk](https://security.snyk.io/)

## 14.6 OWASP Top 10

- Open Worldwide Application Security Project: ì˜¤í”ˆì†ŒìŠ¤ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ í”„ë¡œì íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤.
- ì£¼ë¡œ ì›¹ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì •ë³´ ë…¸ì¶œ, ì•…ì„± ìŠ¤í¬ë¦½íŠ¸, ë³´ì•ˆ ì·¨ì•½ì  ë“±ì„ ì—°êµ¬í•˜ë©°, ì£¼ê¸°ì ìœ¼ë¡œ 10ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì·¨ì•½ì ì„ ê³µê°œí•˜ëŠ”ë° ì´ê²ƒì„ OWASP Top 10ì´ë¼ê³  í•œë‹¤.

[2022ë…„ OWASP 10ëŒ€ ì·¨ì•½ì  ì´ì •ë¦¬ ê°€ì´ë“œ -](https://www.appsealing.com/kr/2022-owasp-10ëŒ€-ì·¨ì•½ì /)

## ì°¸ê³ 

- https://web.dev/articles/same-site-same-origin
- https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Content-Security-Policy/default-src
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/form-action
